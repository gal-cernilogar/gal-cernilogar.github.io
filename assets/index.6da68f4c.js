(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ra(t,e){const n=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)n[s[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const kp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Op=Ra(kp);function Zu(t){return!!t||t===""}function Ma(t){if(U(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=ke(s)?Pp(s):Ma(s);if(r)for(const i in r)e[i]=r[i]}return e}else{if(ke(t))return t;if(Ie(t))return t}}const Rp=/;(?![^(]*\))/g,Mp=/:(.+)/;function Pp(t){const e={};return t.split(Rp).forEach(n=>{if(n){const s=n.split(Mp);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Pa(t){let e="";if(ke(t))e=t;else if(U(t))for(let n=0;n<t.length;n++){const s=Pa(t[n]);s&&(e+=s+" ")}else if(Ie(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Lp(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=ur(t[s],e[s]);return n}function ur(t,e){if(t===e)return!0;let n=hl(t),s=hl(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=js(t),s=js(e),n||s)return t===e;if(n=U(t),s=U(e),n||s)return n&&s?Lp(t,e):!1;if(n=Ie(t),s=Ie(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!ur(t[o],e[o]))return!1}}return String(t)===String(e)}function La(t,e){return t.findIndex(n=>ur(n,e))}const Ut=t=>ke(t)?t:t==null?"":U(t)||Ie(t)&&(t.toString===nh||!G(t.toString))?JSON.stringify(t,eh,2):String(t),eh=(t,e)=>e&&e.__v_isRef?eh(t,e.value):Wn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r])=>(n[`${s} =>`]=r,n),{})}:hs(e)?{[`Set(${e.size})`]:[...e.values()]}:Ie(e)&&!U(e)&&!sh(e)?String(e):e,he={},Gn=[],gt=()=>{},Fp=()=>!1,Vp=/^on[^a-z]/,Di=t=>Vp.test(t),Fa=t=>t.startsWith("onUpdate:"),He=Object.assign,Va=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},$p=Object.prototype.hasOwnProperty,Z=(t,e)=>$p.call(t,e),U=Array.isArray,Wn=t=>hr(t)==="[object Map]",hs=t=>hr(t)==="[object Set]",hl=t=>hr(t)==="[object Date]",G=t=>typeof t=="function",ke=t=>typeof t=="string",js=t=>typeof t=="symbol",Ie=t=>t!==null&&typeof t=="object",th=t=>Ie(t)&&G(t.then)&&G(t.catch),nh=Object.prototype.toString,hr=t=>nh.call(t),Up=t=>hr(t).slice(8,-1),sh=t=>hr(t)==="[object Object]",$a=t=>ke(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,jr=Ra(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xi=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Bp=/-(\w)/g,Zn=xi(t=>t.replace(Bp,(e,n)=>n?n.toUpperCase():"")),jp=/\B([A-Z])/g,fs=xi(t=>t.replace(jp,"-$1").toLowerCase()),rh=xi(t=>t.charAt(0).toUpperCase()+t.slice(1)),go=xi(t=>t?`on${rh(t)}`:""),qs=(t,e)=>!Object.is(t,e),qr=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},si=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},ri=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let fl;const qp=()=>fl||(fl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Et;class ih{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Et&&(this.parent=Et,this.index=(Et.scopes||(Et.scopes=[])).push(this)-1)}run(e){if(this.active){const n=Et;try{return Et=this,e()}finally{Et=n}}}on(){Et=this}off(){Et=this.parent}stop(e){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function oh(t){return new ih(t)}function Hp(t,e=Et){e&&e.active&&e.effects.push(t)}const Ua=t=>{const e=new Set(t);return e.w=0,e.n=0,e},ah=t=>(t.w&Yt)>0,ch=t=>(t.n&Yt)>0,Kp=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Yt},zp=t=>{const{deps:e}=t;if(e.length){let n=0;for(let s=0;s<e.length;s++){const r=e[s];ah(r)&&!ch(r)?r.delete(t):e[n++]=r,r.w&=~Yt,r.n&=~Yt}e.length=n}},Lo=new WeakMap;let As=0,Yt=1;const Fo=30;let ft;const vn=Symbol(""),Vo=Symbol("");class Ba{constructor(e,n=null,s){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Hp(this,s)}run(){if(!this.active)return this.fn();let e=ft,n=zt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ft,ft=this,zt=!0,Yt=1<<++As,As<=Fo?Kp(this):dl(this),this.fn()}finally{As<=Fo&&zp(this),Yt=1<<--As,ft=this.parent,zt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ft===this?this.deferStop=!0:this.active&&(dl(this),this.onStop&&this.onStop(),this.active=!1)}}function dl(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let zt=!0;const lh=[];function ds(){lh.push(zt),zt=!1}function ps(){const t=lh.pop();zt=t===void 0?!0:t}function st(t,e,n){if(zt&&ft){let s=Lo.get(t);s||Lo.set(t,s=new Map);let r=s.get(n);r||s.set(n,r=Ua()),uh(r)}}function uh(t,e){let n=!1;As<=Fo?ch(t)||(t.n|=Yt,n=!ah(t)):n=!t.has(ft),n&&(t.add(ft),ft.deps.push(t))}function Ot(t,e,n,s,r,i){const o=Lo.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&U(t))o.forEach((c,l)=>{(l==="length"||l>=s)&&a.push(c)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":U(t)?$a(n)&&a.push(o.get("length")):(a.push(o.get(vn)),Wn(t)&&a.push(o.get(Vo)));break;case"delete":U(t)||(a.push(o.get(vn)),Wn(t)&&a.push(o.get(Vo)));break;case"set":Wn(t)&&a.push(o.get(vn));break}if(a.length===1)a[0]&&$o(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);$o(Ua(c))}}function $o(t,e){const n=U(t)?t:[...t];for(const s of n)s.computed&&pl(s);for(const s of n)s.computed||pl(s)}function pl(t,e){(t!==ft||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Gp=Ra("__proto__,__v_isRef,__isVue"),hh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(js)),Wp=ja(),Qp=ja(!1,!0),Xp=ja(!0),gl=Yp();function Yp(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Y(this);for(let i=0,o=this.length;i<o;i++)st(s,"get",i+"");const r=s[e](...n);return r===-1||r===!1?s[e](...n.map(Y)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ds();const s=Y(this)[e].apply(this,n);return ps(),s}}),t}function ja(t=!1,e=!1){return function(s,r,i){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&i===(t?e?dg:mh:e?gh:ph).get(s))return s;const o=U(s);if(!t&&o&&Z(gl,r))return Reflect.get(gl,r,i);const a=Reflect.get(s,r,i);return(js(r)?hh.has(r):Gp(r))||(t||st(s,"get",r),e)?a:we(a)?o&&$a(r)?a:a.value:Ie(a)?t?yh(a):ki(a):a}}const Jp=fh(),Zp=fh(!0);function fh(t=!1){return function(n,s,r,i){let o=n[s];if(Hs(o)&&we(o)&&!we(r))return!1;if(!t&&!Hs(r)&&(Uo(r)||(r=Y(r),o=Y(o)),!U(n)&&we(o)&&!we(r)))return o.value=r,!0;const a=U(n)&&$a(s)?Number(s)<n.length:Z(n,s),c=Reflect.set(n,s,r,i);return n===Y(i)&&(a?qs(r,o)&&Ot(n,"set",s,r):Ot(n,"add",s,r)),c}}function eg(t,e){const n=Z(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&n&&Ot(t,"delete",e,void 0),s}function tg(t,e){const n=Reflect.has(t,e);return(!js(e)||!hh.has(e))&&st(t,"has",e),n}function ng(t){return st(t,"iterate",U(t)?"length":vn),Reflect.ownKeys(t)}const dh={get:Wp,set:Jp,deleteProperty:eg,has:tg,ownKeys:ng},sg={get:Xp,set(t,e){return!0},deleteProperty(t,e){return!0}},rg=He({},dh,{get:Qp,set:Zp}),qa=t=>t,Ni=t=>Reflect.getPrototypeOf(t);function Nr(t,e,n=!1,s=!1){t=t.__v_raw;const r=Y(t),i=Y(e);n||(e!==i&&st(r,"get",e),st(r,"get",i));const{has:o}=Ni(r),a=s?qa:n?za:Ks;if(o.call(r,e))return a(t.get(e));if(o.call(r,i))return a(t.get(i));t!==r&&t.get(e)}function kr(t,e=!1){const n=this.__v_raw,s=Y(n),r=Y(t);return e||(t!==r&&st(s,"has",t),st(s,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function Or(t,e=!1){return t=t.__v_raw,!e&&st(Y(t),"iterate",vn),Reflect.get(t,"size",t)}function ml(t){t=Y(t);const e=Y(this);return Ni(e).has.call(e,t)||(e.add(t),Ot(e,"add",t,t)),this}function yl(t,e){e=Y(e);const n=Y(this),{has:s,get:r}=Ni(n);let i=s.call(n,t);i||(t=Y(t),i=s.call(n,t));const o=r.call(n,t);return n.set(t,e),i?qs(e,o)&&Ot(n,"set",t,e):Ot(n,"add",t,e),this}function vl(t){const e=Y(this),{has:n,get:s}=Ni(e);let r=n.call(e,t);r||(t=Y(t),r=n.call(e,t)),s&&s.call(e,t);const i=e.delete(t);return r&&Ot(e,"delete",t,void 0),i}function wl(){const t=Y(this),e=t.size!==0,n=t.clear();return e&&Ot(t,"clear",void 0,void 0),n}function Rr(t,e){return function(s,r){const i=this,o=i.__v_raw,a=Y(o),c=e?qa:t?za:Ks;return!t&&st(a,"iterate",vn),o.forEach((l,u)=>s.call(r,c(l),c(u),i))}}function Mr(t,e,n){return function(...s){const r=this.__v_raw,i=Y(r),o=Wn(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=r[t](...s),u=n?qa:e?za:Ks;return!e&&st(i,"iterate",c?Vo:vn),{next(){const{value:h,done:p}=l.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function Bt(t){return function(...e){return t==="delete"?!1:this}}function ig(){const t={get(i){return Nr(this,i)},get size(){return Or(this)},has:kr,add:ml,set:yl,delete:vl,clear:wl,forEach:Rr(!1,!1)},e={get(i){return Nr(this,i,!1,!0)},get size(){return Or(this)},has:kr,add:ml,set:yl,delete:vl,clear:wl,forEach:Rr(!1,!0)},n={get(i){return Nr(this,i,!0)},get size(){return Or(this,!0)},has(i){return kr.call(this,i,!0)},add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear"),forEach:Rr(!0,!1)},s={get(i){return Nr(this,i,!0,!0)},get size(){return Or(this,!0)},has(i){return kr.call(this,i,!0)},add:Bt("add"),set:Bt("set"),delete:Bt("delete"),clear:Bt("clear"),forEach:Rr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Mr(i,!1,!1),n[i]=Mr(i,!0,!1),e[i]=Mr(i,!1,!0),s[i]=Mr(i,!0,!0)}),[t,n,e,s]}const[og,ag,cg,lg]=ig();function Ha(t,e){const n=e?t?lg:cg:t?ag:og;return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Z(n,r)&&r in s?n:s,r,i)}const ug={get:Ha(!1,!1)},hg={get:Ha(!1,!0)},fg={get:Ha(!0,!1)},ph=new WeakMap,gh=new WeakMap,mh=new WeakMap,dg=new WeakMap;function pg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gg(t){return t.__v_skip||!Object.isExtensible(t)?0:pg(Up(t))}function ki(t){return Hs(t)?t:Ka(t,!1,dh,ug,ph)}function mg(t){return Ka(t,!1,rg,hg,gh)}function yh(t){return Ka(t,!0,sg,fg,mh)}function Ka(t,e,n,s,r){if(!Ie(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=r.get(t);if(i)return i;const o=gg(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return r.set(t,a),a}function xt(t){return Hs(t)?xt(t.__v_raw):!!(t&&t.__v_isReactive)}function Hs(t){return!!(t&&t.__v_isReadonly)}function Uo(t){return!!(t&&t.__v_isShallow)}function vh(t){return xt(t)||Hs(t)}function Y(t){const e=t&&t.__v_raw;return e?Y(e):t}function ht(t){return si(t,"__v_skip",!0),t}const Ks=t=>Ie(t)?ki(t):t,za=t=>Ie(t)?yh(t):t;function wh(t){zt&&ft&&(t=Y(t),uh(t.dep||(t.dep=Ua())))}function Eh(t,e){t=Y(t),t.dep&&$o(t.dep)}function we(t){return!!(t&&t.__v_isRef===!0)}function Ga(t){return yg(t,!1)}function yg(t,e){return we(t)?t:new vg(t,e)}class vg{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Y(e),this._value=n?e:Ks(e)}get value(){return wh(this),this._value}set value(e){e=this.__v_isShallow?e:Y(e),qs(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Ks(e),Eh(this))}}function Gt(t){return we(t)?t.value:t}const wg={get:(t,e,n)=>Gt(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return we(r)&&!we(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function _h(t){return xt(t)?t:new Proxy(t,wg)}function El(t){const e=U(t)?new Array(t.length):{};for(const n in t)e[n]=Hr(t,n);return e}class Eg{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Hr(t,e,n){const s=t[e];return we(s)?s:new Eg(t,e,n)}class _g{constructor(e,n,s,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ba(e,()=>{this._dirty||(this._dirty=!0,Eh(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const e=Y(this);return wh(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function bg(t,e,n=!1){let s,r;const i=G(t);return i?(s=t,r=gt):(s=t.get,r=t.set),new _g(s,r,i||!r,n)}function Wt(t,e,n,s){let r;try{r=s?t(...s):t()}catch(i){Oi(i,e,n)}return r}function ot(t,e,n,s){if(G(t)){const i=Wt(t,e,n,s);return i&&th(i)&&i.catch(o=>{Oi(o,e,n)}),i}const r=[];for(let i=0;i<t.length;i++)r.push(ot(t[i],e,n,s));return r}function Oi(t,e,n,s=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=n;for(;i;){const l=i.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Wt(c,null,10,[t,o,a]);return}}Tg(t,n,r,s)}function Tg(t,e,n,s=!0){console.error(t)}let ii=!1,Bo=!1;const et=[];let At=0;const Os=[];let Ds=null,jn=0;const Rs=[];let jt=null,qn=0;const bh=Promise.resolve();let Wa=null,jo=null;function qo(t){const e=Wa||bh;return t?e.then(this?t.bind(this):t):e}function Ig(t){let e=At+1,n=et.length;for(;e<n;){const s=e+n>>>1;zs(et[s])<t?e=s+1:n=s}return e}function Th(t){(!et.length||!et.includes(t,ii&&t.allowRecurse?At+1:At))&&t!==jo&&(t.id==null?et.push(t):et.splice(Ig(t.id),0,t),Ih())}function Ih(){!ii&&!Bo&&(Bo=!0,Wa=bh.then(Ah))}function Sg(t){const e=et.indexOf(t);e>At&&et.splice(e,1)}function Sh(t,e,n,s){U(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?s+1:s))&&n.push(t),Ih()}function Cg(t){Sh(t,Ds,Os,jn)}function Ag(t){Sh(t,jt,Rs,qn)}function Ri(t,e=null){if(Os.length){for(jo=e,Ds=[...new Set(Os)],Os.length=0,jn=0;jn<Ds.length;jn++)Ds[jn]();Ds=null,jn=0,jo=null,Ri(t,e)}}function Ch(t){if(Ri(),Rs.length){const e=[...new Set(Rs)];if(Rs.length=0,jt){jt.push(...e);return}for(jt=e,jt.sort((n,s)=>zs(n)-zs(s)),qn=0;qn<jt.length;qn++)jt[qn]();jt=null,qn=0}}const zs=t=>t.id==null?1/0:t.id;function Ah(t){Bo=!1,ii=!0,Ri(t),et.sort((n,s)=>zs(n)-zs(s));const e=gt;try{for(At=0;At<et.length;At++){const n=et[At];n&&n.active!==!1&&Wt(n,null,14)}}finally{At=0,et.length=0,Ch(),ii=!1,Wa=null,(et.length||Os.length||Rs.length)&&Ah(t)}}function Dg(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||he;let r=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:p}=s[u]||he;p&&(r=n.map(g=>g.trim())),h&&(r=n.map(ri))}let a,c=s[a=go(e)]||s[a=go(Zn(e))];!c&&i&&(c=s[a=go(fs(e))]),c&&ot(c,t,6,r);const l=s[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ot(l,t,6,r)}}function Dh(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!G(t)){const c=l=>{const u=Dh(l,e,!0);u&&(a=!0,He(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(s.set(t,null),null):(U(i)?i.forEach(c=>o[c]=null):He(o,i),s.set(t,o),o)}function Mi(t,e){return!t||!Di(e)?!1:(e=e.slice(2).replace(/Once$/,""),Z(t,e[0].toLowerCase()+e.slice(1))||Z(t,fs(e))||Z(t,e))}let dt=null,Pi=null;function oi(t){const e=dt;return dt=t,Pi=t&&t.type.__scopeId||null,e}function xh(t){Pi=t}function Nh(){Pi=null}function xg(t,e=dt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Nl(-1);const i=oi(e),o=t(...r);return oi(i),s._d&&Nl(1),o};return s._n=!0,s._c=!0,s._d=!0,s}function mo(t){const{type:e,vnode:n,proxy:s,withProxy:r,props:i,propsOptions:[o],slots:a,attrs:c,emit:l,render:u,renderCache:h,data:p,setupState:g,ctx:b,inheritAttrs:D}=t;let C,L;const oe=oi(t);try{if(n.shapeFlag&4){const re=r||s;C=_t(u.call(re,re,h,i,g,p,b)),L=c}else{const re=e;C=_t(re.length>1?re(i,{attrs:c,slots:a,emit:l}):re(i,null)),L=e.props?c:Ng(c)}}catch(re){Ls.length=0,Oi(re,t,1),C=tt(Nt)}let ae=C;if(L&&D!==!1){const re=Object.keys(L),{shapeFlag:ve}=ae;re.length&&ve&7&&(o&&re.some(Fa)&&(L=kg(L,o)),ae=Jt(ae,L))}return n.dirs&&(ae=Jt(ae),ae.dirs=ae.dirs?ae.dirs.concat(n.dirs):n.dirs),n.transition&&(ae.transition=n.transition),C=ae,oi(oe),C}const Ng=t=>{let e;for(const n in t)(n==="class"||n==="style"||Di(n))&&((e||(e={}))[n]=t[n]);return e},kg=(t,e)=>{const n={};for(const s in t)(!Fa(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function Og(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?_l(s,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(o[p]!==s[p]&&!Mi(l,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?_l(s,o,l):!0:!!o;return!1}function _l(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Mi(n,i))return!0}return!1}function Rg({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const Mg=t=>t.__isSuspense;function Pg(t,e){e&&e.pendingBranch?U(t)?e.effects.push(...t):e.effects.push(t):Ag(t)}function Lg(t,e){if(Pe){let n=Pe.provides;const s=Pe.parent&&Pe.parent.provides;s===n&&(n=Pe.provides=Object.create(s)),n[t]=e}}function Kr(t,e,n=!1){const s=Pe||dt;if(s){const r=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&G(e)?e.call(s.proxy):e}}const bl={};function Ms(t,e,n){return kh(t,e,n)}function kh(t,e,{immediate:n,deep:s,flush:r,onTrack:i,onTrigger:o}=he){const a=Pe;let c,l=!1,u=!1;if(we(t)?(c=()=>t.value,l=Uo(t)):xt(t)?(c=()=>t,s=!0):U(t)?(u=!0,l=t.some(L=>xt(L)||Uo(L)),c=()=>t.map(L=>{if(we(L))return L.value;if(xt(L))return pn(L);if(G(L))return Wt(L,a,2)})):G(t)?e?c=()=>Wt(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return h&&h(),ot(t,a,3,[p])}:c=gt,e&&s){const L=c;c=()=>pn(L())}let h,p=L=>{h=C.onStop=()=>{Wt(L,a,4)}};if(Ws)return p=gt,e?n&&ot(e,a,3,[c(),u?[]:void 0,p]):c(),gt;let g=u?[]:bl;const b=()=>{if(!!C.active)if(e){const L=C.run();(s||l||(u?L.some((oe,ae)=>qs(oe,g[ae])):qs(L,g)))&&(h&&h(),ot(e,a,3,[L,g===bl?void 0:g,p]),g=L)}else C.run()};b.allowRecurse=!!e;let D;r==="sync"?D=b:r==="post"?D=()=>Qe(b,a&&a.suspense):D=()=>Cg(b);const C=new Ba(c,D);return e?n?b():g=C.run():r==="post"?Qe(C.run.bind(C),a&&a.suspense):C.run(),()=>{C.stop(),a&&a.scope&&Va(a.scope.effects,C)}}function Fg(t,e,n){const s=this.proxy,r=ke(t)?t.includes(".")?Oh(s,t):()=>s[t]:t.bind(s,s);let i;G(e)?i=e:(i=e.handler,n=e);const o=Pe;es(this);const a=kh(r,i.bind(s),n);return o?es(o):wn(),a}function Oh(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}function pn(t,e){if(!Ie(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),we(t))pn(t.value,e);else if(U(t))for(let n=0;n<t.length;n++)pn(t[n],e);else if(hs(t)||Wn(t))t.forEach(n=>{pn(n,e)});else if(sh(t))for(const n in t)pn(t[n],e);return t}function Vg(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xa(()=>{t.isMounted=!0}),Lh(()=>{t.isUnmounting=!0}),t}const it=[Function,Array],$g={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},setup(t,{slots:e}){const n=tc(),s=Vg();let r;return()=>{const i=e.default&&Mh(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const D of i)if(D.type!==Nt){o=D;break}}const a=Y(t),{mode:c}=a;if(s.isLeaving)return yo(o);const l=Tl(o);if(!l)return yo(o);const u=Ho(l,a,s,n);Ko(l,u);const h=n.subTree,p=h&&Tl(h);let g=!1;const{getTransitionKey:b}=l.type;if(b){const D=b();r===void 0?r=D:D!==r&&(r=D,g=!0)}if(p&&p.type!==Nt&&(!hn(l,p)||g)){const D=Ho(p,a,s,n);if(Ko(p,D),c==="out-in")return s.isLeaving=!0,D.afterLeave=()=>{s.isLeaving=!1,n.update()},yo(o);c==="in-out"&&l.type!==Nt&&(D.delayLeave=(C,L,oe)=>{const ae=Rh(s,p);ae[String(p.key)]=p,C._leaveCb=()=>{L(),C._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=oe})}return o}}},Ug=$g;function Rh(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Ho(t,e,n,s){const{appear:r,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:h,onLeave:p,onAfterLeave:g,onLeaveCancelled:b,onBeforeAppear:D,onAppear:C,onAfterAppear:L,onAppearCancelled:oe}=e,ae=String(t.key),re=Rh(n,t),ve=(K,O)=>{K&&ot(K,s,9,O)},yt=(K,O)=>{const x=O[1];ve(K,O),U(K)?K.every(B=>B.length<=1)&&x():K.length<=1&&x()},$={mode:i,persisted:o,beforeEnter(K){let O=a;if(!n.isMounted)if(r)O=D||a;else return;K._leaveCb&&K._leaveCb(!0);const x=re[ae];x&&hn(t,x)&&x.el._leaveCb&&x.el._leaveCb(),ve(O,[K])},enter(K){let O=c,x=l,B=u;if(!n.isMounted)if(r)O=C||c,x=L||l,B=oe||u;else return;let fe=!1;const Ee=K._enterCb=Mn=>{fe||(fe=!0,Mn?ve(B,[K]):ve(x,[K]),$.delayedLeave&&$.delayedLeave(),K._enterCb=void 0)};O?yt(O,[K,Ee]):Ee()},leave(K,O){const x=String(t.key);if(K._enterCb&&K._enterCb(!0),n.isUnmounting)return O();ve(h,[K]);let B=!1;const fe=K._leaveCb=Ee=>{B||(B=!0,O(),Ee?ve(b,[K]):ve(g,[K]),K._leaveCb=void 0,re[x]===t&&delete re[x])};re[x]=t,p?yt(p,[K,fe]):fe()},clone(K){return Ho(K,e,n,s)}};return $}function yo(t){if(Li(t))return t=Jt(t),t.children=null,t}function Tl(t){return Li(t)?t.children?t.children[0]:void 0:t}function Ko(t,e){t.shapeFlag&6&&t.component?Ko(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Mh(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Be?(o.patchFlag&128&&r++,s=s.concat(Mh(o.children,e,a))):(e||o.type!==Nt)&&s.push(a!=null?Jt(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function Qa(t){return G(t)?{setup:t,name:t.name}:t}const zr=t=>!!t.type.__asyncLoader,Li=t=>t.type.__isKeepAlive;function Bg(t,e){Ph(t,"a",e)}function jg(t,e){Ph(t,"da",e)}function Ph(t,e,n=Pe){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Fi(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Li(r.parent.vnode)&&qg(s,e,n,r),r=r.parent}}function qg(t,e,n,s){const r=Fi(e,t,s,!0);Ya(()=>{Va(s[e],r)},n)}function Fi(t,e,n=Pe,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ds(),es(n);const a=ot(e,n,t,o);return wn(),ps(),a});return s?r.unshift(i):r.push(i),i}}const Vt=t=>(e,n=Pe)=>(!Ws||t==="sp")&&Fi(t,e,n),Hg=Vt("bm"),Xa=Vt("m"),Kg=Vt("bu"),zg=Vt("u"),Lh=Vt("bum"),Ya=Vt("um"),Gg=Vt("sp"),Wg=Vt("rtg"),Qg=Vt("rtc");function Xg(t,e=Pe){Fi("ec",t,e)}function Vn(t,e){const n=dt;if(n===null)return t;const s=$i(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[o,a,c,l=he]=e[i];G(o)&&(o={mounted:o,updated:o}),o.deep&&pn(a),r.push({dir:o,instance:s,value:a,oldValue:void 0,arg:c,modifiers:l})}return t}function on(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(ds(),ot(c,n,8,[t.el,a,t,e]),ps())}}const Yg=Symbol();function Ps(t,e,n,s){let r;const i=n&&n[s];if(U(t)||ke(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,i&&i[o])}else if(Ie(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const l=o[a];r[a]=e(t[l],l,a,i&&i[a])}}else r=[];return n&&(n[s]=r),r}const zo=t=>t?Xh(t)?$i(t)||t.proxy:zo(t.parent):null,ai=He(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>zo(t.parent),$root:t=>zo(t.root),$emit:t=>t.emit,$options:t=>Vh(t),$forceUpdate:t=>t.f||(t.f=()=>Th(t.update)),$nextTick:t=>t.n||(t.n=qo.bind(t.proxy)),$watch:t=>Fg.bind(t)}),Jg={get({_:t},e){const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(s!==he&&Z(s,e))return o[e]=1,s[e];if(r!==he&&Z(r,e))return o[e]=2,r[e];if((l=t.propsOptions[0])&&Z(l,e))return o[e]=3,i[e];if(n!==he&&Z(n,e))return o[e]=4,n[e];Go&&(o[e]=0)}}const u=ai[e];let h,p;if(u)return e==="$attrs"&&st(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==he&&Z(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,Z(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return r!==he&&Z(r,e)?(r[e]=n,!0):s!==he&&Z(s,e)?(s[e]=n,!0):Z(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==he&&Z(t,o)||e!==he&&Z(e,o)||(a=i[0])&&Z(a,o)||Z(s,o)||Z(ai,o)||Z(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Z(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let Go=!0;function Zg(t){const e=Vh(t),n=t.proxy,s=t.ctx;Go=!1,e.beforeCreate&&Il(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:b,activated:D,deactivated:C,beforeDestroy:L,beforeUnmount:oe,destroyed:ae,unmounted:re,render:ve,renderTracked:yt,renderTriggered:$,errorCaptured:K,serverPrefetch:O,expose:x,inheritAttrs:B,components:fe,directives:Ee,filters:Mn}=e;if(l&&em(l,s,null,t.appContext.config.unwrapInjectedRef),o)for(const X in o){const pe=o[X];G(pe)&&(s[X]=pe.bind(n))}if(r){const X=r.call(n,n);Ie(X)&&(t.data=ki(X))}if(Go=!0,i)for(const X in i){const pe=i[X],It=G(pe)?pe.bind(n,n):G(pe.get)?pe.get.bind(n,n):gt,ho=!G(pe)&&G(pe.set)?pe.set.bind(n):gt,Is=nc({get:It,set:ho});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>Is.value,set:Pn=>Is.value=Pn})}if(a)for(const X in a)Fh(a[X],s,n,X);if(c){const X=G(c)?c.call(n):c;Reflect.ownKeys(X).forEach(pe=>{Lg(pe,X[pe])})}u&&Il(u,t,"c");function _e(X,pe){U(pe)?pe.forEach(It=>X(It.bind(n))):pe&&X(pe.bind(n))}if(_e(Hg,h),_e(Xa,p),_e(Kg,g),_e(zg,b),_e(Bg,D),_e(jg,C),_e(Xg,K),_e(Qg,yt),_e(Wg,$),_e(Lh,oe),_e(Ya,re),_e(Gg,O),U(x))if(x.length){const X=t.exposed||(t.exposed={});x.forEach(pe=>{Object.defineProperty(X,pe,{get:()=>n[pe],set:It=>n[pe]=It})})}else t.exposed||(t.exposed={});ve&&t.render===gt&&(t.render=ve),B!=null&&(t.inheritAttrs=B),fe&&(t.components=fe),Ee&&(t.directives=Ee)}function em(t,e,n=gt,s=!1){U(t)&&(t=Wo(t));for(const r in t){const i=t[r];let o;Ie(i)?"default"in i?o=Kr(i.from||r,i.default,!0):o=Kr(i.from||r):o=Kr(i),we(o)&&s?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Il(t,e,n){ot(U(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Fh(t,e,n,s){const r=s.includes(".")?Oh(n,s):()=>n[s];if(ke(t)){const i=e[t];G(i)&&Ms(r,i)}else if(G(t))Ms(r,t.bind(n));else if(Ie(t))if(U(t))t.forEach(i=>Fh(i,e,n,s));else{const i=G(t.handler)?t.handler.bind(n):e[t.handler];G(i)&&Ms(r,i,t)}}function Vh(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(l=>ci(c,l,o,!0)),ci(c,e,o)),i.set(e,c),c}function ci(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ci(t,i,n,!0),r&&r.forEach(o=>ci(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=tm[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const tm={data:Sl,props:cn,emits:cn,methods:cn,computed:cn,beforeCreate:Ke,created:Ke,beforeMount:Ke,mounted:Ke,beforeUpdate:Ke,updated:Ke,beforeDestroy:Ke,beforeUnmount:Ke,destroyed:Ke,unmounted:Ke,activated:Ke,deactivated:Ke,errorCaptured:Ke,serverPrefetch:Ke,components:cn,directives:cn,watch:sm,provide:Sl,inject:nm};function Sl(t,e){return e?t?function(){return He(G(t)?t.call(this,this):t,G(e)?e.call(this,this):e)}:e:t}function nm(t,e){return cn(Wo(t),Wo(e))}function Wo(t){if(U(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ke(t,e){return t?[...new Set([].concat(t,e))]:e}function cn(t,e){return t?He(He(Object.create(null),t),e):e}function sm(t,e){if(!t)return e;if(!e)return t;const n=He(Object.create(null),t);for(const s in e)n[s]=Ke(t[s],e[s]);return n}function rm(t,e,n,s=!1){const r={},i={};si(i,Vi,1),t.propsDefaults=Object.create(null),$h(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:mg(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function im(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Y(r),[c]=t.propsOptions;let l=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(Mi(t.emitsOptions,p))continue;const g=e[p];if(c)if(Z(i,p))g!==i[p]&&(i[p]=g,l=!0);else{const b=Zn(p);r[b]=Qo(c,a,b,g,t,!1)}else g!==i[p]&&(i[p]=g,l=!0)}}}else{$h(t,e,r,i)&&(l=!0);let u;for(const h in a)(!e||!Z(e,h)&&((u=fs(h))===h||!Z(e,u)))&&(c?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=Qo(c,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Z(e,h)&&!0)&&(delete i[h],l=!0)}l&&Ot(t,"set","$attrs")}function $h(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(jr(c))continue;const l=e[c];let u;r&&Z(r,u=Zn(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Mi(t.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,o=!0)}if(i){const c=Y(n),l=a||he;for(let u=0;u<i.length;u++){const h=i[u];n[h]=Qo(r,c,h,l[h],t,!Z(l,h))}}return o}function Qo(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Z(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&G(c)){const{propsDefaults:l}=r;n in l?s=l[n]:(es(r),s=l[n]=c.call(null,e),wn())}else s=c}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===fs(n))&&(s=!0))}return s}function Uh(t,e,n=!1){const s=e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let c=!1;if(!G(t)){const u=h=>{c=!0;const[p,g]=Uh(h,e,!0);He(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return s.set(t,Gn),Gn;if(U(i))for(let u=0;u<i.length;u++){const h=Zn(i[u]);Cl(h)&&(o[h]=he)}else if(i)for(const u in i){const h=Zn(u);if(Cl(h)){const p=i[u],g=o[h]=U(p)||G(p)?{type:p}:p;if(g){const b=xl(Boolean,g.type),D=xl(String,g.type);g[0]=b>-1,g[1]=D<0||b<D,(b>-1||Z(g,"default"))&&a.push(h)}}}const l=[o,a];return s.set(t,l),l}function Cl(t){return t[0]!=="$"}function Al(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Dl(t,e){return Al(t)===Al(e)}function xl(t,e){return U(e)?e.findIndex(n=>Dl(n,t)):G(e)&&Dl(e,t)?0:-1}const Bh=t=>t[0]==="_"||t==="$stable",Ja=t=>U(t)?t.map(_t):[_t(t)],om=(t,e,n)=>{if(e._n)return e;const s=xg((...r)=>Ja(e(...r)),n);return s._c=!1,s},jh=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Bh(r))continue;const i=t[r];if(G(i))e[r]=om(r,i,s);else if(i!=null){const o=Ja(i);e[r]=()=>o}}},qh=(t,e)=>{const n=Ja(e);t.slots.default=()=>n},am=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Y(e),si(e,"_",n)):jh(e,t.slots={})}else t.slots={},e&&qh(t,e);si(t.slots,Vi,1)},cm=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=he;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(He(r,e),!n&&a===1&&delete r._):(i=!e.$stable,jh(e,r)),o=e}else e&&(qh(t,e),o={default:1});if(i)for(const a in r)!Bh(a)&&!(a in o)&&delete r[a]};function Hh(){return{app:null,config:{isNativeTag:Fp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lm=0;function um(t,e){return function(s,r=null){G(s)||(s=Object.assign({},s)),r!=null&&!Ie(r)&&(r=null);const i=Hh(),o=new Set;let a=!1;const c=i.app={_uid:lm++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Dm,get config(){return i.config},set config(l){},use(l,...u){return o.has(l)||(l&&G(l.install)?(o.add(l),l.install(c,...u)):G(l)&&(o.add(l),l(c,...u))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,u){return u?(i.components[l]=u,c):i.components[l]},directive(l,u){return u?(i.directives[l]=u,c):i.directives[l]},mount(l,u,h){if(!a){const p=tt(s,r);return p.appContext=i,u&&e?e(p,l):t(p,l,h),a=!0,c._container=l,l.__vue_app__=c,$i(p.component)||p.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(l,u){return i.provides[l]=u,c}};return c}}function Xo(t,e,n,s,r=!1){if(U(t)){t.forEach((p,g)=>Xo(p,e&&(U(e)?e[g]:e),n,s,r));return}if(zr(s)&&!r)return;const i=s.shapeFlag&4?$i(s.component)||s.component.proxy:s.el,o=r?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===he?a.refs={}:a.refs,h=a.setupState;if(l!=null&&l!==c&&(ke(l)?(u[l]=null,Z(h,l)&&(h[l]=null)):we(l)&&(l.value=null)),G(c))Wt(c,a,12,[o,u]);else{const p=ke(c),g=we(c);if(p||g){const b=()=>{if(t.f){const D=p?u[c]:c.value;r?U(D)&&Va(D,i):U(D)?D.includes(i)||D.push(i):p?(u[c]=[i],Z(h,c)&&(h[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else p?(u[c]=o,Z(h,c)&&(h[c]=o)):g&&(c.value=o,t.k&&(u[t.k]=o))};o?(b.id=-1,Qe(b,n)):b()}}}const Qe=Pg;function hm(t){return fm(t)}function fm(t,e){const n=qp();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=gt,cloneNode:b,insertStaticContent:D}=t,C=(f,d,m,v=null,y=null,I=null,A=!1,T=null,S=!!d.dynamicChildren)=>{if(f===d)return;f&&!hn(f,d)&&(v=xr(f),$t(f,y,I,!0),f=null),d.patchFlag===-2&&(S=!1,d.dynamicChildren=null);const{type:w,ref:M,shapeFlag:k}=d;switch(w){case Za:L(f,d,m,v);break;case Nt:oe(f,d,m,v);break;case Gr:f==null&&ae(d,m,v,A);break;case Be:Ee(f,d,m,v,y,I,A,T,S);break;default:k&1?yt(f,d,m,v,y,I,A,T,S):k&6?Mn(f,d,m,v,y,I,A,T,S):(k&64||k&128)&&w.process(f,d,m,v,y,I,A,T,S,Ln)}M!=null&&y&&Xo(M,f&&f.ref,I,d||f,!d)},L=(f,d,m,v)=>{if(f==null)s(d.el=a(d.children),m,v);else{const y=d.el=f.el;d.children!==f.children&&l(y,d.children)}},oe=(f,d,m,v)=>{f==null?s(d.el=c(d.children||""),m,v):d.el=f.el},ae=(f,d,m,v)=>{[f.el,f.anchor]=D(f.children,d,m,v,f.el,f.anchor)},re=({el:f,anchor:d},m,v)=>{let y;for(;f&&f!==d;)y=p(f),s(f,m,v),f=y;s(d,m,v)},ve=({el:f,anchor:d})=>{let m;for(;f&&f!==d;)m=p(f),r(f),f=m;r(d)},yt=(f,d,m,v,y,I,A,T,S)=>{A=A||d.type==="svg",f==null?$(d,m,v,y,I,A,T,S):x(f,d,y,I,A,T,S)},$=(f,d,m,v,y,I,A,T)=>{let S,w;const{type:M,props:k,shapeFlag:P,transition:q,patchFlag:ee,dirs:ce}=f;if(f.el&&b!==void 0&&ee===-1)S=f.el=b(f.el);else{if(S=f.el=o(f.type,I,k&&k.is,k),P&8?u(S,f.children):P&16&&O(f.children,S,null,v,y,I&&M!=="foreignObject",A,T),ce&&on(f,null,v,"created"),k){for(const ge in k)ge!=="value"&&!jr(ge)&&i(S,ge,null,k[ge],I,f.children,v,y,St);"value"in k&&i(S,"value",null,k.value),(w=k.onVnodeBeforeMount)&&wt(w,v,f)}K(S,f,f.scopeId,A,v)}ce&&on(f,null,v,"beforeMount");const le=(!y||y&&!y.pendingBranch)&&q&&!q.persisted;le&&q.beforeEnter(S),s(S,d,m),((w=k&&k.onVnodeMounted)||le||ce)&&Qe(()=>{w&&wt(w,v,f),le&&q.enter(S),ce&&on(f,null,v,"mounted")},y)},K=(f,d,m,v,y)=>{if(m&&g(f,m),v)for(let I=0;I<v.length;I++)g(f,v[I]);if(y){let I=y.subTree;if(d===I){const A=y.vnode;K(f,A,A.scopeId,A.slotScopeIds,y.parent)}}},O=(f,d,m,v,y,I,A,T,S=0)=>{for(let w=S;w<f.length;w++){const M=f[w]=T?qt(f[w]):_t(f[w]);C(null,M,d,m,v,y,I,A,T)}},x=(f,d,m,v,y,I,A)=>{const T=d.el=f.el;let{patchFlag:S,dynamicChildren:w,dirs:M}=d;S|=f.patchFlag&16;const k=f.props||he,P=d.props||he;let q;m&&an(m,!1),(q=P.onVnodeBeforeUpdate)&&wt(q,m,d,f),M&&on(d,f,m,"beforeUpdate"),m&&an(m,!0);const ee=y&&d.type!=="foreignObject";if(w?B(f.dynamicChildren,w,T,m,v,ee,I):A||It(f,d,T,null,m,v,ee,I,!1),S>0){if(S&16)fe(T,d,k,P,m,v,y);else if(S&2&&k.class!==P.class&&i(T,"class",null,P.class,y),S&4&&i(T,"style",k.style,P.style,y),S&8){const ce=d.dynamicProps;for(let le=0;le<ce.length;le++){const ge=ce[le],ct=k[ge],Fn=P[ge];(Fn!==ct||ge==="value")&&i(T,ge,ct,Fn,y,f.children,m,v,St)}}S&1&&f.children!==d.children&&u(T,d.children)}else!A&&w==null&&fe(T,d,k,P,m,v,y);((q=P.onVnodeUpdated)||M)&&Qe(()=>{q&&wt(q,m,d,f),M&&on(d,f,m,"updated")},v)},B=(f,d,m,v,y,I,A)=>{for(let T=0;T<d.length;T++){const S=f[T],w=d[T],M=S.el&&(S.type===Be||!hn(S,w)||S.shapeFlag&70)?h(S.el):m;C(S,w,M,null,v,y,I,A,!0)}},fe=(f,d,m,v,y,I,A)=>{if(m!==v){for(const T in v){if(jr(T))continue;const S=v[T],w=m[T];S!==w&&T!=="value"&&i(f,T,w,S,A,d.children,y,I,St)}if(m!==he)for(const T in m)!jr(T)&&!(T in v)&&i(f,T,m[T],null,A,d.children,y,I,St);"value"in v&&i(f,"value",m.value,v.value)}},Ee=(f,d,m,v,y,I,A,T,S)=>{const w=d.el=f?f.el:a(""),M=d.anchor=f?f.anchor:a("");let{patchFlag:k,dynamicChildren:P,slotScopeIds:q}=d;q&&(T=T?T.concat(q):q),f==null?(s(w,m,v),s(M,m,v),O(d.children,m,M,y,I,A,T,S)):k>0&&k&64&&P&&f.dynamicChildren?(B(f.dynamicChildren,P,m,y,I,A,T),(d.key!=null||y&&d===y.subTree)&&Kh(f,d,!0)):It(f,d,m,M,y,I,A,T,S)},Mn=(f,d,m,v,y,I,A,T,S)=>{d.slotScopeIds=T,f==null?d.shapeFlag&512?y.ctx.activate(d,m,v,A,S):Ts(d,m,v,y,I,A,S):_e(f,d,S)},Ts=(f,d,m,v,y,I,A)=>{const T=f.component=bm(f,v,y);if(Li(f)&&(T.ctx.renderer=Ln),Tm(T),T.asyncDep){if(y&&y.registerDep(T,X),!f.el){const S=T.subTree=tt(Nt);oe(null,S,d,m)}return}X(T,f,d,m,y,I,A)},_e=(f,d,m)=>{const v=d.component=f.component;if(Og(f,d,m))if(v.asyncDep&&!v.asyncResolved){pe(v,d,m);return}else v.next=d,Sg(v.update),v.update();else d.el=f.el,v.vnode=d},X=(f,d,m,v,y,I,A)=>{const T=()=>{if(f.isMounted){let{next:M,bu:k,u:P,parent:q,vnode:ee}=f,ce=M,le;an(f,!1),M?(M.el=ee.el,pe(f,M,A)):M=ee,k&&qr(k),(le=M.props&&M.props.onVnodeBeforeUpdate)&&wt(le,q,M,ee),an(f,!0);const ge=mo(f),ct=f.subTree;f.subTree=ge,C(ct,ge,h(ct.el),xr(ct),f,y,I),M.el=ge.el,ce===null&&Rg(f,ge.el),P&&Qe(P,y),(le=M.props&&M.props.onVnodeUpdated)&&Qe(()=>wt(le,q,M,ee),y)}else{let M;const{el:k,props:P}=d,{bm:q,m:ee,parent:ce}=f,le=zr(d);if(an(f,!1),q&&qr(q),!le&&(M=P&&P.onVnodeBeforeMount)&&wt(M,ce,d),an(f,!0),k&&po){const ge=()=>{f.subTree=mo(f),po(k,f.subTree,f,y,null)};le?d.type.__asyncLoader().then(()=>!f.isUnmounted&&ge()):ge()}else{const ge=f.subTree=mo(f);C(null,ge,m,v,f,y,I),d.el=ge.el}if(ee&&Qe(ee,y),!le&&(M=P&&P.onVnodeMounted)){const ge=d;Qe(()=>wt(M,ce,ge),y)}(d.shapeFlag&256||ce&&zr(ce.vnode)&&ce.vnode.shapeFlag&256)&&f.a&&Qe(f.a,y),f.isMounted=!0,d=m=v=null}},S=f.effect=new Ba(T,()=>Th(w),f.scope),w=f.update=()=>S.run();w.id=f.uid,an(f,!0),w()},pe=(f,d,m)=>{d.component=f;const v=f.vnode.props;f.vnode=d,f.next=null,im(f,d.props,v,m),cm(f,d.children,m),ds(),Ri(void 0,f.update),ps()},It=(f,d,m,v,y,I,A,T,S=!1)=>{const w=f&&f.children,M=f?f.shapeFlag:0,k=d.children,{patchFlag:P,shapeFlag:q}=d;if(P>0){if(P&128){Is(w,k,m,v,y,I,A,T,S);return}else if(P&256){ho(w,k,m,v,y,I,A,T,S);return}}q&8?(M&16&&St(w,y,I),k!==w&&u(m,k)):M&16?q&16?Is(w,k,m,v,y,I,A,T,S):St(w,y,I,!0):(M&8&&u(m,""),q&16&&O(k,m,v,y,I,A,T,S))},ho=(f,d,m,v,y,I,A,T,S)=>{f=f||Gn,d=d||Gn;const w=f.length,M=d.length,k=Math.min(w,M);let P;for(P=0;P<k;P++){const q=d[P]=S?qt(d[P]):_t(d[P]);C(f[P],q,m,null,y,I,A,T,S)}w>M?St(f,y,I,!0,!1,k):O(d,m,v,y,I,A,T,S,k)},Is=(f,d,m,v,y,I,A,T,S)=>{let w=0;const M=d.length;let k=f.length-1,P=M-1;for(;w<=k&&w<=P;){const q=f[w],ee=d[w]=S?qt(d[w]):_t(d[w]);if(hn(q,ee))C(q,ee,m,null,y,I,A,T,S);else break;w++}for(;w<=k&&w<=P;){const q=f[k],ee=d[P]=S?qt(d[P]):_t(d[P]);if(hn(q,ee))C(q,ee,m,null,y,I,A,T,S);else break;k--,P--}if(w>k){if(w<=P){const q=P+1,ee=q<M?d[q].el:v;for(;w<=P;)C(null,d[w]=S?qt(d[w]):_t(d[w]),m,ee,y,I,A,T,S),w++}}else if(w>P)for(;w<=k;)$t(f[w],y,I,!0),w++;else{const q=w,ee=w,ce=new Map;for(w=ee;w<=P;w++){const Ze=d[w]=S?qt(d[w]):_t(d[w]);Ze.key!=null&&ce.set(Ze.key,w)}let le,ge=0;const ct=P-ee+1;let Fn=!1,cl=0;const Ss=new Array(ct);for(w=0;w<ct;w++)Ss[w]=0;for(w=q;w<=k;w++){const Ze=f[w];if(ge>=ct){$t(Ze,y,I,!0);continue}let vt;if(Ze.key!=null)vt=ce.get(Ze.key);else for(le=ee;le<=P;le++)if(Ss[le-ee]===0&&hn(Ze,d[le])){vt=le;break}vt===void 0?$t(Ze,y,I,!0):(Ss[vt-ee]=w+1,vt>=cl?cl=vt:Fn=!0,C(Ze,d[vt],m,null,y,I,A,T,S),ge++)}const ll=Fn?dm(Ss):Gn;for(le=ll.length-1,w=ct-1;w>=0;w--){const Ze=ee+w,vt=d[Ze],ul=Ze+1<M?d[Ze+1].el:v;Ss[w]===0?C(null,vt,m,ul,y,I,A,T,S):Fn&&(le<0||w!==ll[le]?Pn(vt,m,ul,2):le--)}}},Pn=(f,d,m,v,y=null)=>{const{el:I,type:A,transition:T,children:S,shapeFlag:w}=f;if(w&6){Pn(f.component.subTree,d,m,v);return}if(w&128){f.suspense.move(d,m,v);return}if(w&64){A.move(f,d,m,Ln);return}if(A===Be){s(I,d,m);for(let k=0;k<S.length;k++)Pn(S[k],d,m,v);s(f.anchor,d,m);return}if(A===Gr){re(f,d,m);return}if(v!==2&&w&1&&T)if(v===0)T.beforeEnter(I),s(I,d,m),Qe(()=>T.enter(I),y);else{const{leave:k,delayLeave:P,afterLeave:q}=T,ee=()=>s(I,d,m),ce=()=>{k(I,()=>{ee(),q&&q()})};P?P(I,ee,ce):ce()}else s(I,d,m)},$t=(f,d,m,v=!1,y=!1)=>{const{type:I,props:A,ref:T,children:S,dynamicChildren:w,shapeFlag:M,patchFlag:k,dirs:P}=f;if(T!=null&&Xo(T,null,m,f,!0),M&256){d.ctx.deactivate(f);return}const q=M&1&&P,ee=!zr(f);let ce;if(ee&&(ce=A&&A.onVnodeBeforeUnmount)&&wt(ce,d,f),M&6)Np(f.component,m,v);else{if(M&128){f.suspense.unmount(m,v);return}q&&on(f,null,d,"beforeUnmount"),M&64?f.type.remove(f,d,m,y,Ln,v):w&&(I!==Be||k>0&&k&64)?St(w,d,m,!1,!0):(I===Be&&k&384||!y&&M&16)&&St(S,d,m),v&&ol(f)}(ee&&(ce=A&&A.onVnodeUnmounted)||q)&&Qe(()=>{ce&&wt(ce,d,f),q&&on(f,null,d,"unmounted")},m)},ol=f=>{const{type:d,el:m,anchor:v,transition:y}=f;if(d===Be){xp(m,v);return}if(d===Gr){ve(f);return}const I=()=>{r(m),y&&!y.persisted&&y.afterLeave&&y.afterLeave()};if(f.shapeFlag&1&&y&&!y.persisted){const{leave:A,delayLeave:T}=y,S=()=>A(m,I);T?T(f.el,I,S):S()}else I()},xp=(f,d)=>{let m;for(;f!==d;)m=p(f),r(f),f=m;r(d)},Np=(f,d,m)=>{const{bum:v,scope:y,update:I,subTree:A,um:T}=f;v&&qr(v),y.stop(),I&&(I.active=!1,$t(A,f,d,m)),T&&Qe(T,d),Qe(()=>{f.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},St=(f,d,m,v=!1,y=!1,I=0)=>{for(let A=I;A<f.length;A++)$t(f[A],d,m,v,y)},xr=f=>f.shapeFlag&6?xr(f.component.subTree):f.shapeFlag&128?f.suspense.next():p(f.anchor||f.el),al=(f,d,m)=>{f==null?d._vnode&&$t(d._vnode,null,null,!0):C(d._vnode||null,f,d,null,null,null,m),Ch(),d._vnode=f},Ln={p:C,um:$t,m:Pn,r:ol,mt:Ts,mc:O,pc:It,pbc:B,n:xr,o:t};let fo,po;return e&&([fo,po]=e(Ln)),{render:al,hydrate:fo,createApp:um(al,fo)}}function an({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Kh(t,e,n=!1){const s=t.children,r=e.children;if(U(s)&&U(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=qt(r[i]),a.el=o.el),n||Kh(o,a))}}function dm(t){const e=t.slice(),n=[0];let s,r,i,o,a;const c=t.length;for(s=0;s<c;s++){const l=t[s];if(l!==0){if(r=n[n.length-1],t[r]<l){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}const pm=t=>t.__isTeleport,Be=Symbol(void 0),Za=Symbol(void 0),Nt=Symbol(void 0),Gr=Symbol(void 0),Ls=[];let pt=null;function ie(t=!1){Ls.push(pt=t?null:[])}function gm(){Ls.pop(),pt=Ls[Ls.length-1]||null}let Gs=1;function Nl(t){Gs+=t}function zh(t){return t.dynamicChildren=Gs>0?pt||Gn:null,gm(),Gs>0&&pt&&pt.push(t),t}function ue(t,e,n,s,r,i){return zh(te(t,e,n,s,r,i,!0))}function kl(t,e,n,s,r){return zh(tt(t,e,n,s,r,!0))}function mm(t){return t?t.__v_isVNode===!0:!1}function hn(t,e){return t.type===e.type&&t.key===e.key}const Vi="__vInternal",Gh=({key:t})=>t!=null?t:null,Wr=({ref:t,ref_key:e,ref_for:n})=>t!=null?ke(t)||we(t)||G(t)?{i:dt,r:t,k:e,f:!!n}:t:null;function te(t,e=null,n=null,s=0,r=null,i=t===Be?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Gh(e),ref:e&&Wr(e),scopeId:Pi,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(ec(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=ke(n)?8:16),Gs>0&&!o&&pt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&pt.push(c),c}const tt=ym;function ym(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===Yg)&&(t=Nt),mm(t)){const a=Jt(t,e,!0);return n&&ec(a,n),Gs>0&&!i&&pt&&(a.shapeFlag&6?pt[pt.indexOf(t)]=a:pt.push(a)),a.patchFlag|=-2,a}if(Am(t)&&(t=t.__vccOpts),e){e=vm(e);let{class:a,style:c}=e;a&&!ke(a)&&(e.class=Pa(a)),Ie(c)&&(vh(c)&&!U(c)&&(c=He({},c)),e.style=Ma(c))}const o=ke(t)?1:Mg(t)?128:pm(t)?64:Ie(t)?4:G(t)?2:0;return te(t,e,n,s,r,o,i,!0)}function vm(t){return t?vh(t)||Vi in t?He({},t):t:null}function Jt(t,e,n=!1){const{props:s,ref:r,patchFlag:i,children:o}=t,a=e?wm(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Gh(a),ref:e&&e.ref?n&&r?U(r)?r.concat(Wr(e)):[r,Wr(e)]:Wr(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Be?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jt(t.ssContent),ssFallback:t.ssFallback&&Jt(t.ssFallback),el:t.el,anchor:t.anchor}}function Wh(t=" ",e=0){return tt(Za,null,t,e)}function Qh(t,e){const n=tt(Gr,null,t);return n.staticCount=e,n}function _t(t){return t==null||typeof t=="boolean"?tt(Nt):U(t)?tt(Be,null,t.slice()):typeof t=="object"?qt(t):tt(Za,null,String(t))}function qt(t){return t.el===null||t.memo?t:Jt(t)}function ec(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(U(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ec(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(Vi in e)?e._ctx=dt:r===3&&dt&&(dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else G(e)?(e={default:e,_ctx:dt},n=32):(e=String(e),s&64?(n=16,e=[Wh(e)]):n=8);t.children=e,t.shapeFlag|=n}function wm(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Pa([e.class,s.class]));else if(r==="style")e.style=Ma([e.style,s.style]);else if(Di(r)){const i=e[r],o=s[r];o&&i!==o&&!(U(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function wt(t,e,n,s=null){ot(t,e,7,[n,s])}const Em=Hh();let _m=0;function bm(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||Em,i={uid:_m++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ih(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Uh(s,r),emitsOptions:Dh(s,r),emit:null,emitted:null,propsDefaults:he,inheritAttrs:s.inheritAttrs,ctx:he,data:he,props:he,attrs:he,slots:he,refs:he,setupState:he,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Dg.bind(null,i),t.ce&&t.ce(i),i}let Pe=null;const tc=()=>Pe||dt,es=t=>{Pe=t,t.scope.on()},wn=()=>{Pe&&Pe.scope.off(),Pe=null};function Xh(t){return t.vnode.shapeFlag&4}let Ws=!1;function Tm(t,e=!1){Ws=e;const{props:n,children:s}=t.vnode,r=Xh(t);rm(t,n,r,e),am(t,s);const i=r?Im(t,e):void 0;return Ws=!1,i}function Im(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=ht(new Proxy(t.ctx,Jg));const{setup:s}=n;if(s){const r=t.setupContext=s.length>1?Cm(t):null;es(t),ds();const i=Wt(s,t,0,[t.props,r]);if(ps(),wn(),th(i)){if(i.then(wn,wn),e)return i.then(o=>{Ol(t,o,e)}).catch(o=>{Oi(o,t,0)});t.asyncDep=i}else Ol(t,i,e)}else Yh(t,e)}function Ol(t,e,n){G(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ie(e)&&(t.setupState=_h(e)),Yh(t,n)}let Rl;function Yh(t,e,n){const s=t.type;if(!t.render){if(!e&&Rl&&!s.render){const r=s.template;if(r){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=s,l=He(He({isCustomElement:i,delimiters:a},o),c);s.render=Rl(r,l)}}t.render=s.render||gt}es(t),ds(),Zg(t),ps(),wn()}function Sm(t){return new Proxy(t.attrs,{get(e,n){return st(t,"get","$attrs"),e[n]}})}function Cm(t){const e=s=>{t.exposed=s||{}};let n;return{get attrs(){return n||(n=Sm(t))},slots:t.slots,emit:t.emit,expose:e}}function $i(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(_h(ht(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ai)return ai[n](t)}}))}function Am(t){return G(t)&&"__vccOpts"in t}const nc=(t,e)=>bg(t,e,Ws),Dm="3.2.37",xm="http://www.w3.org/2000/svg",fn=typeof document<"u"?document:null,Ml=fn&&fn.createElement("template"),Nm={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e?fn.createElementNS(xm,t):fn.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>fn.createTextNode(t),createComment:t=>fn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Ml.innerHTML=s?`<svg>${t}</svg>`:t;const a=Ml.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function km(t,e,n){const s=t._vtc;s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function Om(t,e,n){const s=t.style,r=ke(n);if(n&&!r){for(const i in n)Yo(s,i,n[i]);if(e&&!ke(e))for(const i in e)n[i]==null&&Yo(s,i,"")}else{const i=s.display;r?e!==n&&(s.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(s.display=i)}}const Pl=/\s*!important$/;function Yo(t,e,n){if(U(n))n.forEach(s=>Yo(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=Rm(t,e);Pl.test(n)?t.setProperty(fs(s),n.replace(Pl,""),"important"):t[s]=n}}const Ll=["Webkit","Moz","ms"],vo={};function Rm(t,e){const n=vo[e];if(n)return n;let s=Zn(e);if(s!=="filter"&&s in t)return vo[e]=s;s=rh(s);for(let r=0;r<Ll.length;r++){const i=Ll[r]+s;if(i in t)return vo[e]=i}return e}const Fl="http://www.w3.org/1999/xlink";function Mm(t,e,n,s,r){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Fl,e.slice(6,e.length)):t.setAttributeNS(Fl,e,n);else{const i=Op(e);n==null||i&&!Zu(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function Pm(t,e,n,s,r,i,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,r,i),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n==null?"":n;(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Zu(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}const[Jh,Lm]=(()=>{let t=Date.now,e=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(t=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(n&&Number(n[1])<=53)}return[t,e]})();let Jo=0;const Fm=Promise.resolve(),Vm=()=>{Jo=0},$m=()=>Jo||(Fm.then(Vm),Jo=Jh());function Ht(t,e,n,s){t.addEventListener(e,n,s)}function Um(t,e,n,s){t.removeEventListener(e,n,s)}function Bm(t,e,n,s,r=null){const i=t._vei||(t._vei={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=jm(e);if(s){const l=i[e]=qm(s,r);Ht(t,a,l,c)}else o&&(Um(t,a,o,c),i[e]=void 0)}}const Vl=/(?:Once|Passive|Capture)$/;function jm(t){let e;if(Vl.test(t)){e={};let n;for(;n=t.match(Vl);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[fs(t.slice(2)),e]}function qm(t,e){const n=s=>{const r=s.timeStamp||Jh();(Lm||r>=n.attached-1)&&ot(Hm(s,n.value),e,5,[s])};return n.value=t,n.attached=$m(),n}function Hm(t,e){if(U(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const $l=/^on[a-z]/,Km=(t,e,n,s,r=!1,i,o,a,c)=>{e==="class"?km(t,s,r):e==="style"?Om(t,n,s):Di(e)?Fa(e)||Bm(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):zm(t,e,s,r))?Pm(t,e,s,i,o,a,c):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Mm(t,e,s,r))};function zm(t,e,n,s){return s?!!(e==="innerHTML"||e==="textContent"||e in t&&$l.test(e)&&G(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||$l.test(e)&&ke(n)?!1:e in t}const Gm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ug.props;const ts=t=>{const e=t.props["onUpdate:modelValue"]||!1;return U(e)?n=>qr(e,n):e};function Wm(t){t.target.composing=!0}function Ul(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const wo={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t._assign=ts(r);const i=s||r.props&&r.props.type==="number";Ht(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=ri(a)),t._assign(a)}),n&&Ht(t,"change",()=>{t.value=t.value.trim()}),e||(Ht(t,"compositionstart",Wm),Ht(t,"compositionend",Ul),Ht(t,"change",Ul))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:r}},i){if(t._assign=ts(i),t.composing||document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===e||(r||t.type==="number")&&ri(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},Qm={deep:!0,created(t,e,n){t._assign=ts(n),Ht(t,"change",()=>{const s=t._modelValue,r=Qs(t),i=t.checked,o=t._assign;if(U(s)){const a=La(s,r),c=a!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const l=[...s];l.splice(a,1),o(l)}}else if(hs(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Zh(t,i))})},mounted:Bl,beforeUpdate(t,e,n){t._assign=ts(n),Bl(t,e,n)}};function Bl(t,{value:e,oldValue:n},s){t._modelValue=e,U(e)?t.checked=La(e,s.props.value)>-1:hs(e)?t.checked=e.has(s.props.value):e!==n&&(t.checked=ur(e,Zh(t,!0)))}const jl={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=hs(e);Ht(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ri(Qs(o)):Qs(o));t._assign(t.multiple?r?new Set(i):i:i[0])}),t._assign=ts(s)},mounted(t,{value:e}){ql(t,e)},beforeUpdate(t,e,n){t._assign=ts(n)},updated(t,{value:e}){ql(t,e)}};function ql(t,e){const n=t.multiple;if(!(n&&!U(e)&&!hs(e))){for(let s=0,r=t.options.length;s<r;s++){const i=t.options[s],o=Qs(i);if(n)U(e)?i.selected=La(e,o)>-1:i.selected=e.has(o);else if(ur(Qs(i),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Qs(t){return"_value"in t?t._value:t.value}function Zh(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Xm=["ctrl","shift","alt","meta"],Ym={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Xm.some(n=>t[`${n}Key`]&&!e.includes(n))},Jm=(t,e)=>(n,...s)=>{for(let r=0;r<e.length;r++){const i=Ym[e[r]];if(i&&i(n,e))return}return t(n,...s)},Zm=He({patchProp:Km},Nm);let Hl;function ey(){return Hl||(Hl=hm(Zm))}const ty=(...t)=>{const e=ey().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=ny(s);if(!r)return;const i=e._component;!G(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function ny(t){return ke(t)?document.querySelector(t):t}var sy=!1;function Pr(t,e,n){return Array.isArray(t)?(t.length=Math.max(t.length,e),t.splice(e,1,n),n):(t[e]=n,n)}function Eo(t,e){if(Array.isArray(t)){t.splice(e,1);return}delete t[e]}function ry(){return ef().__VUE_DEVTOOLS_GLOBAL_HOOK__}function ef(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const iy=typeof Proxy=="function",oy="devtools-plugin:setup",ay="plugin:settings:set";let $n,Zo;function cy(){var t;return $n!==void 0||(typeof window<"u"&&window.performance?($n=!0,Zo=window.performance):typeof global<"u"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?($n=!0,Zo=global.perf_hooks.performance):$n=!1),$n}function ly(){return cy()?Zo.now():Date.now()}class uy{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const s={};if(e.settings)for(const o in e.settings){const a=e.settings[o];s[o]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},s);try{const o=localStorage.getItem(r),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}i=o},now(){return ly()}},n&&n.on(ay,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...c)=>{this.onQueue.push({method:a,args:c})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...c)=>(this.targetQueue.push({method:a,args:c,resolve:()=>{}}),this.fallbacks[a](...c)):(...c)=>new Promise(l=>{this.targetQueue.push({method:a,args:c,resolve:l})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function tf(t,e){const n=t,s=ef(),r=ry(),i=iy&&n.enableEarlyProxy;if(r&&(s.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))r.emit(oy,t,e);else{const o=i?new uy(n,r):null;(s.__VUE_DEVTOOLS_PLUGINS__=s.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let ea;const Xs=t=>ea=t,nf=Symbol("pinia");function Tn(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var bt;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(bt||(bt={}));const Kt=typeof window<"u",Kl=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function hy(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function sc(t,e,n){const s=new XMLHttpRequest;s.open("GET",t),s.responseType="blob",s.onload=function(){of(s.response,e,n)},s.onerror=function(){console.error("could not download file")},s.send()}function sf(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Qr(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const Xr=typeof navigator=="object"?navigator:{userAgent:""},rf=(()=>/Macintosh/.test(Xr.userAgent)&&/AppleWebKit/.test(Xr.userAgent)&&!/Safari/.test(Xr.userAgent))(),of=Kt?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!rf?fy:"msSaveOrOpenBlob"in Xr?dy:py:()=>{};function fy(t,e="download",n){const s=document.createElement("a");s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?sf(s.href)?sc(t,e,n):(s.target="_blank",Qr(s)):Qr(s)):(s.href=URL.createObjectURL(t),setTimeout(function(){URL.revokeObjectURL(s.href)},4e4),setTimeout(function(){Qr(s)},0))}function dy(t,e="download",n){if(typeof t=="string")if(sf(t))sc(t,e,n);else{const s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){Qr(s)})}else navigator.msSaveOrOpenBlob(hy(t,n),e)}function py(t,e,n,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof t=="string")return sc(t,e,n);const r=t.type==="application/octet-stream",i=/constructor/i.test(String(Kl.HTMLElement))||"safari"in Kl,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&i||rf)&&typeof FileReader<"u"){const a=new FileReader;a.onloadend=function(){let c=a.result;if(typeof c!="string")throw s=null,new Error("Wrong reader.result type");c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=c:location.assign(c),s=null},a.readAsDataURL(t)}else{const a=URL.createObjectURL(t);s?s.location.assign(a):location.href=a,s=null,setTimeout(function(){URL.revokeObjectURL(a)},4e4)}}function Ne(t,e){const n="\u{1F34D} "+t;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(n,e):e==="error"?console.error(n):e==="warn"?console.warn(n):console.log(n)}function rc(t){return"_a"in t&&"install"in t}function af(){if(!("clipboard"in navigator))return Ne("Your browser doesn't support the Clipboard API","error"),!0}function cf(t){return t instanceof Error&&t.message.toLowerCase().includes("document is not focused")?(Ne('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function gy(t){if(!af())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),Ne("Global state copied to clipboard.")}catch(e){if(cf(e))return;Ne("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function my(t){if(!af())try{t.state.value=JSON.parse(await navigator.clipboard.readText()),Ne("Global state pasted from clipboard.")}catch(e){if(cf(e))return;Ne("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function yy(t){try{of(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){Ne("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let Ct;function vy(){Ct||(Ct=document.createElement("input"),Ct.type="file",Ct.accept=".json");function t(){return new Promise((e,n)=>{Ct.onchange=async()=>{const s=Ct.files;if(!s)return e(null);const r=s.item(0);return e(r?{text:await r.text(),file:r}:null)},Ct.oncancel=()=>e(null),Ct.onerror=n,Ct.click()})}return t}async function wy(t){try{const n=await(await vy())();if(!n)return;const{text:s,file:r}=n;t.state.value=JSON.parse(s),Ne(`Global state imported from "${r.name}".`)}catch(e){Ne("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}function lt(t){return{_custom:{display:t}}}const lf="\u{1F34D} Pinia (root)",ta="_root";function Ey(t){return rc(t)?{id:ta,label:lf}:{id:t.$id,label:t.$id}}function _y(t){if(rc(t)){const n=Array.from(t._s.keys()),s=t._s;return{state:n.map(i=>({editable:!0,key:i,value:t.state.value[i]})),getters:n.filter(i=>s.get(i)._getters).map(i=>{const o=s.get(i);return{editable:!1,key:i,value:o._getters.reduce((a,c)=>(a[c]=o[c],a),{})}})}}const e={state:Object.keys(t.$state).map(n=>({editable:!0,key:n,value:t.$state[n]}))};return t._getters&&t._getters.length&&(e.getters=t._getters.map(n=>({editable:!1,key:n,value:t[n]}))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map(n=>({editable:!0,key:n,value:t[n]}))),e}function by(t){return t?Array.isArray(t)?t.reduce((e,n)=>(e.keys.push(n.key),e.operations.push(n.type),e.oldValue[n.key]=n.oldValue,e.newValue[n.key]=n.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:lt(t.type),key:lt(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function Ty(t){switch(t){case bt.direct:return"mutation";case bt.patchFunction:return"$patch";case bt.patchObject:return"$patch";default:return"unknown"}}let Hn=!0;const Yr=[],ln="pinia:mutations",Ue="pinia",li=t=>"\u{1F34D} "+t;function Iy(t,e){tf({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Yr,app:t},n=>{typeof n.now!="function"&&Ne("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:ln,label:"Pinia \u{1F34D}",color:15064968}),n.addInspector({id:Ue,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{gy(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await my(e),n.sendInspectorTree(Ue),n.sendInspectorState(Ue)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{yy(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await wy(e),n.sendInspectorTree(Ue),n.sendInspectorState(Ue)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:s=>{const r=e._s.get(s);r?r._isOptionsAPI?(r.$reset(),Ne(`Store "${s}" reset.`)):Ne(`Cannot reset "${s}" store because it's a setup store.`,"warn"):Ne(`Cannot reset "${s}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent((s,r)=>{const i=s.componentInstance&&s.componentInstance.proxy;if(i&&i._pStores){const o=s.componentInstance.proxy._pStores;Object.values(o).forEach(a=>{s.instanceData.state.push({type:li(a.$id),key:"state",editable:!0,value:a._isOptionsAPI?{_custom:{value:Y(a.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>a.$reset()}]}}:Object.keys(a.$state).reduce((c,l)=>(c[l]=a.$state[l],c),{})}),a._getters&&a._getters.length&&s.instanceData.state.push({type:li(a.$id),key:"getters",editable:!1,value:a._getters.reduce((c,l)=>{try{c[l]=a[l]}catch(u){c[l]=u}return c},{})})})}}),n.on.getInspectorTree(s=>{if(s.app===t&&s.inspectorId===Ue){let r=[e];r=r.concat(Array.from(e._s.values())),s.rootNodes=(s.filter?r.filter(i=>"$id"in i?i.$id.toLowerCase().includes(s.filter.toLowerCase()):lf.toLowerCase().includes(s.filter.toLowerCase())):r).map(Ey)}}),n.on.getInspectorState(s=>{if(s.app===t&&s.inspectorId===Ue){const r=s.nodeId===ta?e:e._s.get(s.nodeId);if(!r)return;r&&(s.state=_y(r))}}),n.on.editInspectorState((s,r)=>{if(s.app===t&&s.inspectorId===Ue){const i=s.nodeId===ta?e:e._s.get(s.nodeId);if(!i)return Ne(`store "${s.nodeId}" not found`,"error");const{path:o}=s;rc(i)?o.unshift("state"):(o.length!==1||!i._customProperties.has(o[0])||o[0]in i.$state)&&o.unshift("$state"),Hn=!1,s.set(i,o,s.state.value),Hn=!0}}),n.on.editComponentState(s=>{if(s.type.startsWith("\u{1F34D}")){const r=s.type.replace(/^\s*/,""),i=e._s.get(r);if(!i)return Ne(`store "${r}" not found`,"error");const{path:o}=s;if(o[0]!=="state")return Ne(`Invalid path for store "${r}":
${o}
Only state can be modified.`);o[0]="$state",Hn=!1,s.set(i,o,s.state.value),Hn=!0}})})}function Sy(t,e){Yr.includes(li(e.$id))||Yr.push(li(e.$id)),tf({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Yr,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},n=>{const s=typeof n.now=="function"?n.now.bind(n):Date.now;e.$onAction(({after:o,onError:a,name:c,args:l})=>{const u=uf++;n.addTimelineEvent({layerId:ln,event:{time:s(),title:"\u{1F6EB} "+c,subtitle:"start",data:{store:lt(e.$id),action:lt(c),args:l},groupId:u}}),o(h=>{dn=void 0,n.addTimelineEvent({layerId:ln,event:{time:s(),title:"\u{1F6EC} "+c,subtitle:"end",data:{store:lt(e.$id),action:lt(c),args:l,result:h},groupId:u}})}),a(h=>{dn=void 0,n.addTimelineEvent({layerId:ln,event:{time:s(),logType:"error",title:"\u{1F4A5} "+c,subtitle:"end",data:{store:lt(e.$id),action:lt(c),args:l,error:h},groupId:u}})})},!0),e._customProperties.forEach(o=>{Ms(()=>Gt(e[o]),(a,c)=>{n.notifyComponentUpdate(),n.sendInspectorState(Ue),Hn&&n.addTimelineEvent({layerId:ln,event:{time:s(),title:"Change",subtitle:o,data:{newValue:a,oldValue:c},groupId:dn}})},{deep:!0})}),e.$subscribe(({events:o,type:a},c)=>{if(n.notifyComponentUpdate(),n.sendInspectorState(Ue),!Hn)return;const l={time:s(),title:Ty(a),data:{store:lt(e.$id),...by(o)},groupId:dn};dn=void 0,a===bt.patchFunction?l.subtitle="\u2935\uFE0F":a===bt.patchObject?l.subtitle="\u{1F9E9}":o&&!Array.isArray(o)&&(l.subtitle=o.type),o&&(l.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:o}}),n.addTimelineEvent({layerId:ln,event:l})},{detached:!0,flush:"sync"});const r=e._hotUpdate;e._hotUpdate=ht(o=>{r(o),n.addTimelineEvent({layerId:ln,event:{time:s(),title:"\u{1F525} "+e.$id,subtitle:"HMR update",data:{store:lt(e.$id),info:lt("HMR update")}}}),n.notifyComponentUpdate(),n.sendInspectorTree(Ue),n.sendInspectorState(Ue)});const{$dispose:i}=e;e.$dispose=()=>{i(),n.notifyComponentUpdate(),n.sendInspectorTree(Ue),n.sendInspectorState(Ue),n.getSettings().logStoreChanges&&Ne(`Disposed "${e.$id}" store \u{1F5D1}`)},n.notifyComponentUpdate(),n.sendInspectorTree(Ue),n.sendInspectorState(Ue),n.getSettings().logStoreChanges&&Ne(`"${e.$id}" store installed \u{1F195}`)})}let uf=0,dn;function zl(t,e){const n=e.reduce((s,r)=>(s[r]=Y(t)[r],s),{});for(const s in n)t[s]=function(){const r=uf,i=new Proxy(t,{get(...o){return dn=r,Reflect.get(...o)},set(...o){return dn=r,Reflect.set(...o)}});return n[s].apply(i,arguments)}}function Cy({app:t,store:e,options:n}){if(!e.$id.startsWith("__hot:")){if(n.state&&(e._isOptionsAPI=!0),typeof n.state=="function"){zl(e,Object.keys(n.actions));const s=e._hotUpdate;Y(e)._hotUpdate=function(r){s.apply(this,arguments),zl(e,Object.keys(r._hmrPayload.actions))}}Sy(t,e)}}function Ay(){const t=oh(!0),e=t.run(()=>Ga({}));let n=[],s=[];const r=ht({install(i){Xs(r),r._a=i,i.provide(nf,r),i.config.globalProperties.$pinia=r,Kt&&Iy(i,r),s.forEach(o=>n.push(o)),s=[]},use(i){return!this._a&&!sy?s.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return Kt&&!0&&typeof Proxy<"u"&&r.use(Cy),r}function hf(t,e){for(const n in e){const s=e[n];if(!(n in t))continue;const r=t[n];Tn(r)&&Tn(s)&&!we(s)&&!xt(s)?t[n]=hf(r,s):t[n]=s}return t}const Dy=()=>{};function Gl(t,e,n,s=Dy){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&tc()&&Ya(r),r}function Un(t,...e){t.slice().forEach(n=>{n(...e)})}function na(t,e){for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];Tn(r)&&Tn(s)&&t.hasOwnProperty(n)&&!we(s)&&!xt(s)?t[n]=na(r,s):t[n]=s}return t}const xy=Symbol("pinia:skipHydration");function Ny(t){return!Tn(t)||!t.hasOwnProperty(xy)}const{assign:ut}=Object;function Wl(t){return!!(we(t)&&t.effect)}function Ql(t,e,n,s){const{state:r,actions:i,getters:o}=e,a=n.state.value[t];let c;function l(){!a&&!s&&(n.state.value[t]=r?r():{});const u=El(s?Ga(r?r():{}).value:n.state.value[t]);return ut(u,i,Object.keys(o||{}).reduce((h,p)=>(p in u&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${p}" in store "${t}".`),h[p]=ht(nc(()=>{Xs(n);const g=n._s.get(t);return o[p].call(g,g)})),h),{}))}return c=sa(t,l,e,n,s,!0),c.$reset=function(){const h=r?r():{};this.$patch(p=>{ut(p,h)})},c}function sa(t,e,n={},s,r,i){let o;const a=ut({actions:{}},n);if(!s._e.active)throw new Error("Pinia destroyed");const c={deep:!0};c.onTrigger=O=>{l?g=O:l==!1&&!$._hotUpdating&&(Array.isArray(g)?g.push(O):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let l,u,h=ht([]),p=ht([]),g;const b=s.state.value[t];!i&&!b&&!r&&(s.state.value[t]={});const D=Ga({});let C;function L(O){let x;l=u=!1,g=[],typeof O=="function"?(O(s.state.value[t]),x={type:bt.patchFunction,storeId:t,events:g}):(na(s.state.value[t],O),x={type:bt.patchObject,payload:O,storeId:t,events:g});const B=C=Symbol();qo().then(()=>{C===B&&(l=!0)}),u=!0,Un(h,x,s.state.value[t])}const oe=()=>{throw new Error(`\u{1F34D}: Store "${t}" is built using the setup syntax and does not implement $reset().`)};function ae(){o.stop(),h=[],p=[],s._s.delete(t)}function re(O,x){return function(){Xs(s);const B=Array.from(arguments),fe=[],Ee=[];function Mn(X){fe.push(X)}function Ts(X){Ee.push(X)}Un(p,{args:B,name:O,store:$,after:Mn,onError:Ts});let _e;try{_e=x.apply(this&&this.$id===t?this:$,B)}catch(X){throw Un(Ee,X),X}return _e instanceof Promise?_e.then(X=>(Un(fe,X),X)).catch(X=>(Un(Ee,X),Promise.reject(X))):(Un(fe,_e),_e)}}const ve=ht({actions:{},getters:{},state:[],hotState:D}),yt={_p:s,$id:t,$onAction:Gl.bind(null,p),$patch:L,$reset:oe,$subscribe(O,x={}){const B=Gl(h,O,x.detached,()=>fe()),fe=o.run(()=>Ms(()=>s.state.value[t],Ee=>{(x.flush==="sync"?u:l)&&O({storeId:t,type:bt.direct,events:g},Ee)},ut({},c,x)));return B},$dispose:ae},$=ki(ut(Kt?{_customProperties:ht(new Set),_hmrPayload:ve}:{},yt));s._s.set(t,$);const K=s._e.run(()=>(o=oh(),o.run(()=>e())));for(const O in K){const x=K[O];if(we(x)&&!Wl(x)||xt(x))r?Pr(D.value,O,Hr(K,O)):i||(b&&Ny(x)&&(we(x)?x.value=b[O]:na(x,b[O])),s.state.value[t][O]=x),ve.state.push(O);else if(typeof x=="function"){const B=r?x:re(O,x);K[O]=B,ve.actions[O]=x,a.actions[O]=x}else Wl(x)&&(ve.getters[O]=i?n.getters[O]:x,Kt&&(K._getters||(K._getters=ht([]))).push(O))}ut($,K),ut(Y($),K),Object.defineProperty($,"$state",{get:()=>r?D.value:s.state.value[t],set:O=>{if(r)throw new Error("cannot set hotState");L(x=>{ut(x,O)})}});{$._hotUpdate=ht(x=>{$._hotUpdating=!0,x._hmrPayload.state.forEach(B=>{if(B in $.$state){const fe=x.$state[B],Ee=$.$state[B];typeof fe=="object"&&Tn(fe)&&Tn(Ee)?hf(fe,Ee):x.$state[B]=Ee}Pr($,B,Hr(x.$state,B))}),Object.keys($.$state).forEach(B=>{B in x.$state||Eo($,B)}),l=!1,u=!1,s.state.value[t]=Hr(x._hmrPayload,"hotState"),u=!0,qo().then(()=>{l=!0});for(const B in x._hmrPayload.actions){const fe=x[B];Pr($,B,re(B,fe))}for(const B in x._hmrPayload.getters){const fe=x._hmrPayload.getters[B],Ee=i?nc(()=>(Xs(s),fe.call($,$))):fe;Pr($,B,Ee)}Object.keys($._hmrPayload.getters).forEach(B=>{B in x._hmrPayload.getters||Eo($,B)}),Object.keys($._hmrPayload.actions).forEach(B=>{B in x._hmrPayload.actions||Eo($,B)}),$._hmrPayload=x._hmrPayload,$._getters=x._getters,$._hotUpdating=!1});const O={writable:!0,configurable:!0,enumerable:!1};Kt&&["_p","_hmrPayload","_getters","_customProperties"].forEach(x=>{Object.defineProperty($,x,{value:$[x],...O})})}return s._p.forEach(O=>{if(Kt){const x=o.run(()=>O({store:$,app:s._a,pinia:s,options:a}));Object.keys(x||{}).forEach(B=>$._customProperties.add(B)),ut($,x)}else ut($,o.run(()=>O({store:$,app:s._a,pinia:s,options:a})))}),$.$state&&typeof $.$state=="object"&&typeof $.$state.constructor=="function"&&!$.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${$.$id}".`),b&&i&&n.hydrate&&n.hydrate($.$state,b),l=!0,u=!0,$}function ky(t,e,n){let s,r;const i=typeof e=="function";typeof t=="string"?(s=t,r=i?n:e):(r=t,s=t.id);function o(a,c){const l=tc();if(a=a||l&&Kr(nf),a&&Xs(a),!ea)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);a=ea,a._s.has(s)||(i?sa(s,e,r,a):Ql(s,r,a),o._pinia=a);const u=a._s.get(s);if(c){const h="__hot:"+s,p=i?sa(h,e,r,a,!0):Ql(h,ut({},r),a,!0);c._hotUpdate(p),delete a.state.value[h],a._s.delete(h)}if(Kt&&l&&l.proxy&&!c){const h=l.proxy,p="_pStores"in h?h._pStores:h._pStores={};p[s]=u}return u}return o.$id=s,o}const ic=ky({id:"events",state:()=>({events:[],newEvent:[],editing:!1}),getters:{getThisEvent:t=>e=>t.events.find(n=>n===e),getOtherEvents:t=>e=>t.events.filter(n=>n!==e)}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Oy=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,c=r+2<t.length,l=c?t[r+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(p=64)),s.push(n[u],n[h],n[p],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ff(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Oy(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const l=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||l==null||h==null)throw Error();const p=i<<2|a>>4;if(s.push(p),l!==64){const g=a<<4&240|l>>2;if(s.push(g),h!==64){const b=l<<6&192|h;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},My=function(t){const e=ff(t);return Ry.encodeByteArray(e,!0)},df=function(t){return My(t).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ly(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ui())}function Fy(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $y(){return Ui().indexOf("Electron/")>=0}function Uy(){const t=Ui();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function By(){return Ui().indexOf("MSAppHost/")>=0}function jy(){return typeof indexedDB=="object"}function qy(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="FirebaseError";class gs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Hy,Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pf.prototype.create)}}class pf{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Ky(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new gs(r,a,s)}}function Ky(t,e){return t.replace(zy,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const zy=/\{\$([^}]+)}/g;function ra(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Xl(i)&&Xl(o)){if(!ra(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Xl(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class Ys{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Py;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qy(e))try{this.getOrInitializeService({instanceIdentifier:un})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=un){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=un){return this.instances.has(e)}getOptions(e=un){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Wy(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=un){return this.component?this.component.multipleInstances?e:un:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wy(t){return t===un?void 0:t}function Qy(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Gy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const Yy={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},Jy=ne.INFO,Zy={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ev=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Zy[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gf{constructor(e){this.name=e,this._logLevel=Jy,this._logHandler=ev,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const tv=(t,e)=>e.some(n=>t instanceof n);let Yl,Jl;function nv(){return Yl||(Yl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sv(){return Jl||(Jl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mf=new WeakMap,ia=new WeakMap,yf=new WeakMap,_o=new WeakMap,oc=new WeakMap;function rv(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Qt(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mf.set(n,t)}).catch(()=>{}),oc.set(e,t),e}function iv(t){if(ia.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ia.set(t,e)}let oa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ia.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yf.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ov(t){oa=t(oa)}function av(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(bo(this),e,...n);return yf.set(s,e.sort?e.sort():[e]),Qt(s)}:sv().includes(t)?function(...e){return t.apply(bo(this),e),Qt(mf.get(this))}:function(...e){return Qt(t.apply(bo(this),e))}}function cv(t){return typeof t=="function"?av(t):(t instanceof IDBTransaction&&iv(t),tv(t,nv())?new Proxy(t,oa):t)}function Qt(t){if(t instanceof IDBRequest)return rv(t);if(_o.has(t))return _o.get(t);const e=cv(t);return e!==t&&(_o.set(t,e),oc.set(e,t)),e}const bo=t=>oc.get(t);function lv(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Qt(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Qt(o.result),c.oldVersion,c.newVersion,Qt(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const uv=["get","getKey","getAll","getAllKeys","count"],hv=["put","add","delete","clear"],To=new Map;function Zl(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(To.get(e))return To.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=hv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||uv.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let l=c.store;return s&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),r&&c.done]))[0]};return To.set(e,i),i}ov(t=>({...t,get:(e,n,s)=>Zl(e,n)||t.get(e,n,s),has:(e,n)=>!!Zl(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function dv(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const aa="@firebase/app",eu="0.7.30";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new gf("@firebase/app"),pv="@firebase/app-compat",gv="@firebase/analytics-compat",mv="@firebase/analytics",yv="@firebase/app-check-compat",vv="@firebase/app-check",wv="@firebase/auth",Ev="@firebase/auth-compat",_v="@firebase/database",bv="@firebase/database-compat",Tv="@firebase/functions",Iv="@firebase/functions-compat",Sv="@firebase/installations",Cv="@firebase/installations-compat",Av="@firebase/messaging",Dv="@firebase/messaging-compat",xv="@firebase/performance",Nv="@firebase/performance-compat",kv="@firebase/remote-config",Ov="@firebase/remote-config-compat",Rv="@firebase/storage",Mv="@firebase/storage-compat",Pv="@firebase/firestore",Lv="@firebase/firestore-compat",Fv="firebase",Vv="9.9.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",$v={[aa]:"fire-core",[pv]:"fire-core-compat",[mv]:"fire-analytics",[gv]:"fire-analytics-compat",[vv]:"fire-app-check",[yv]:"fire-app-check-compat",[wv]:"fire-auth",[Ev]:"fire-auth-compat",[_v]:"fire-rtdb",[bv]:"fire-rtdb-compat",[Tv]:"fire-fn",[Iv]:"fire-fn-compat",[Sv]:"fire-iid",[Cv]:"fire-iid-compat",[Av]:"fire-fcm",[Dv]:"fire-fcm-compat",[xv]:"fire-perf",[Nv]:"fire-perf-compat",[kv]:"fire-rc",[Ov]:"fire-rc-compat",[Rv]:"fire-gcs",[Mv]:"fire-gcs-compat",[Pv]:"fire-fst",[Lv]:"fire-fst-compat","fire-js":"fire-js",[Fv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new Map,ca=new Map;function Uv(t,e){try{t.container.addComponent(e)}catch(n){In.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(ca.has(e))return In.debug(`There were multiple attempts to register component ${e}.`),!1;ca.set(e,t);for(const n of ui.values())Uv(n,t);return!0}function Bv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Sn=new pf("app","Firebase",jv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=Vv;function Kv(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:vf,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Sn.create("bad-app-name",{appName:String(s)});const r=ui.get(s);if(r){if(ra(t,r.options)&&ra(n,r.config))return r;throw Sn.create("duplicate-app",{appName:s})}const i=new Xy(s);for(const a of ca.values())i.addComponent(a);const o=new qv(t,n,i);return ui.set(s,o),o}function zv(t=vf){const e=ui.get(t);if(!e)throw Sn.create("no-app",{appName:t});return e}function Qn(t,e,n){var s;let r=(s=$v[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),In.warn(a.join(" "));return}hi(new Ys(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="firebase-heartbeat-database",Wv=1,Js="firebase-heartbeat-store";let Io=null;function wf(){return Io||(Io=lv(Gv,Wv,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Js)}}}).catch(t=>{throw Sn.create("idb-open",{originalErrorMessage:t.message})})),Io}async function Qv(t){var e;try{return(await wf()).transaction(Js).objectStore(Js).get(Ef(t))}catch(n){if(n instanceof gs)In.warn(n.message);else{const s=Sn.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});In.warn(s.message)}}}async function tu(t,e){var n;try{const r=(await wf()).transaction(Js,"readwrite");return await r.objectStore(Js).put(e,Ef(t)),r.done}catch(s){if(s instanceof gs)In.warn(s.message);else{const r=Sn.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});In.warn(r.message)}}}function Ef(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=1024,Yv=30*24*60*60*1e3;class Jv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ew(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nu();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=Yv}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nu(),{heartbeatsToSend:n,unsentEntries:s}=Zv(this._heartbeatsCache.heartbeats),r=df(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function nu(){return new Date().toISOString().substring(0,10)}function Zv(t,e=Xv){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),su(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),su(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ew{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jy()?qy().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Qv(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return tu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return tu(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function su(t){return df(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){hi(new Ys("platform-logger",e=>new fv(e),"PRIVATE")),hi(new Ys("heartbeat",e=>new Jv(e),"PRIVATE")),Qn(aa,eu,t),Qn(aa,eu,"esm2017"),Qn("fire-js","")}tw("");var nw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,ac=ac||{},j=nw||self;function fi(){}function la(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function fr(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function sw(t){return Object.prototype.hasOwnProperty.call(t,So)&&t[So]||(t[So]=++rw)}var So="closure_uid_"+(1e9*Math.random()>>>0),rw=0;function iw(t,e,n){return t.call.apply(t.bind,arguments)}function ow(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Le(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Le=iw:Le=ow,Le.apply(null,arguments)}function Lr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function $e(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function nn(){this.s=this.s,this.o=this.o}var aw=0;nn.prototype.s=!1;nn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),aw!=0)&&sw(this)};nn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _f=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},bf=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const s=t.length,r=typeof t=="string"?t.split(""):t;for(let i=0;i<s;i++)i in r&&e.call(n,r[i],i,t)};function cw(t){e:{var e=Zw;const n=t.length,s=typeof t=="string"?t.split(""):t;for(let r=0;r<n;r++)if(r in s&&e.call(void 0,s[r],r,t)){e=r;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function ru(t){return Array.prototype.concat.apply([],arguments)}function cc(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function di(t){return/^[\s\xa0]*$/.test(t)}var iu=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ze(t,e){return t.indexOf(e)!=-1}function Co(t,e){return t<e?-1:t>e?1:0}var Ge;e:{var ou=j.navigator;if(ou){var au=ou.userAgent;if(au){Ge=au;break e}}Ge=""}function lc(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function Tf(t){const e={};for(const n in t)e[n]=t[n];return e}var cu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function If(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<cu.length;i++)n=cu[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function uc(t){return uc[" "](t),t}uc[" "]=fi;function lw(t){var e=fw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var uw=ze(Ge,"Opera"),ns=ze(Ge,"Trident")||ze(Ge,"MSIE"),Sf=ze(Ge,"Edge"),ua=Sf||ns,Cf=ze(Ge,"Gecko")&&!(ze(Ge.toLowerCase(),"webkit")&&!ze(Ge,"Edge"))&&!(ze(Ge,"Trident")||ze(Ge,"MSIE"))&&!ze(Ge,"Edge"),hw=ze(Ge.toLowerCase(),"webkit")&&!ze(Ge,"Edge");function Af(){var t=j.document;return t?t.documentMode:void 0}var pi;e:{var Ao="",Do=function(){var t=Ge;if(Cf)return/rv:([^\);]+)(\)|;)/.exec(t);if(Sf)return/Edge\/([\d\.]+)/.exec(t);if(ns)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(hw)return/WebKit\/(\S+)/.exec(t);if(uw)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Do&&(Ao=Do?Do[1]:""),ns){var xo=Af();if(xo!=null&&xo>parseFloat(Ao)){pi=String(xo);break e}}pi=Ao}var fw={};function dw(){return lw(function(){let t=0;const e=iu(String(pi)).split("."),n=iu("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=Co(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||Co(r[2].length==0,i[2].length==0)||Co(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var ha;if(j.document&&ns){var lu=Af();ha=lu||parseInt(pi,10)||void 0}else ha=void 0;var pw=ha,gw=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",fi,e),j.removeEventListener("test",fi,e)}catch{}return t}();function qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}qe.prototype.h=function(){this.defaultPrevented=!0};function Zs(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Cf){e:{try{uc(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:mw[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Zs.Z.h.call(this)}}$e(Zs,qe);var mw={2:"touch",3:"pen",4:"mouse"};Zs.prototype.h=function(){Zs.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var dr="closure_listenable_"+(1e6*Math.random()|0),yw=0;function vw(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ia=r,this.key=++yw,this.ca=this.fa=!1}function Bi(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ji(t){this.src=t,this.g={},this.h=0}ji.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=da(t,e,s,r);return-1<o?(e=t[o],n||(e.fa=!1)):(e=new vw(e,this.src,i,!!s,r),e.fa=n,t.push(e)),e};function fa(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=_f(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(Bi(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function da(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==s)return r}return-1}var hc="closure_lm_"+(1e6*Math.random()|0),No={};function Df(t,e,n,s,r){if(s&&s.once)return Nf(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Df(t,e[i],n,s,r);return null}return n=pc(n),t&&t[dr]?t.N(e,n,fr(s)?!!s.capture:!!s,r):xf(t,e,n,!1,s,r)}function xf(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=fr(r)?!!r.capture:!!r,a=dc(t);if(a||(t[hc]=a=new ji(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=ww(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)gw||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(Of(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function ww(){function t(n){return e.call(t.src,t.listener,n)}var e=Ew;return t}function Nf(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Nf(t,e[i],n,s,r);return null}return n=pc(n),t&&t[dr]?t.O(e,n,fr(s)?!!s.capture:!!s,r):xf(t,e,n,!0,s,r)}function kf(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)kf(t,e[i],n,s,r);else s=fr(s)?!!s.capture:!!s,n=pc(n),t&&t[dr]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=da(i,n,s,r),-1<n&&(Bi(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=dc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=da(e,n,s,r)),(n=-1<t?e[t]:null)&&fc(n))}function fc(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[dr])fa(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Of(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=dc(e))?(fa(n,t),n.h==0&&(n.src=null,e[hc]=null)):Bi(t)}}}function Of(t){return t in No?No[t]:No[t]="on"+t}function Ew(t,e){if(t.ca)t=!0;else{e=new Zs(e,this);var n=t.listener,s=t.ia||t.src;t.fa&&fc(t),t=n.call(s,e)}return t}function dc(t){return t=t[hc],t instanceof ji?t:null}var ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function pc(t){return typeof t=="function"?t:(t[ko]||(t[ko]=function(e){return t.handleEvent(e)}),t[ko])}function Oe(){nn.call(this),this.i=new ji(this),this.P=this,this.I=null}$e(Oe,nn);Oe.prototype[dr]=!0;Oe.prototype.removeEventListener=function(t,e,n,s){kf(this,t,e,n,s)};function Fe(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new qe(e,t);else if(e instanceof qe)e.target=e.target||t;else{var r=e;e=new qe(s,t),If(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=Fr(o,s,!0,e)&&r}if(o=e.g=t,r=Fr(o,s,!0,e)&&r,r=Fr(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=Fr(o,s,!1,e)&&r}Oe.prototype.M=function(){if(Oe.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Bi(n[s]);delete t.g[e],t.h--}}this.I=null};Oe.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};Oe.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function Fr(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&fa(t.i,o),r=a.call(c,s)!==!1&&r}}return r&&!s.defaultPrevented}var gc=j.JSON.stringify;function _w(){var t=Mf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bw{constructor(){this.h=this.g=null}add(e,n){const s=Rf.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Rf=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Tw,t=>t.reset());class Tw{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Iw(t){j.setTimeout(()=>{throw t},0)}function mc(t,e){pa||Sw(),ga||(pa(),ga=!0),Mf.add(t,e)}var pa;function Sw(){var t=j.Promise.resolve(void 0);pa=function(){t.then(Cw)}}var ga=!1,Mf=new bw;function Cw(){for(var t;t=_w();){try{t.h.call(t.g)}catch(n){Iw(n)}var e=Rf;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ga=!1}function qi(t,e){Oe.call(this),this.h=t||1,this.g=e||j,this.j=Le(this.kb,this),this.l=Date.now()}$e(qi,Oe);N=qi.prototype;N.da=!1;N.S=null;N.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fe(this,"tick"),this.da&&(yc(this),this.start()))}};N.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function yc(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}N.M=function(){qi.Z.M.call(this),yc(this),delete this.g};function vc(t,e,n){if(typeof t=="function")n&&(t=Le(t,n));else if(t&&typeof t.handleEvent=="function")t=Le(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function Pf(t){t.g=vc(()=>{t.g=null,t.i&&(t.i=!1,Pf(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Aw extends nn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Pf(this)}M(){super.M(),this.g&&(j.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(t){nn.call(this),this.h=t,this.g={}}$e(er,nn);var uu=[];function Lf(t,e,n,s){Array.isArray(n)||(n&&(uu[0]=n.toString()),n=uu);for(var r=0;r<n.length;r++){var i=Df(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ff(t){lc(t.g,function(e,n){this.g.hasOwnProperty(n)&&fc(e)},t),t.g={}}er.prototype.M=function(){er.Z.M.call(this),Ff(this)};er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hi(){this.g=!0}Hi.prototype.Aa=function(){this.g=!1};function Dw(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function xw(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function Kn(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kw(t,n)+(s?" "+s:"")})}function Nw(t,e){t.info(function(){return"TIMEOUT: "+e})}Hi.prototype.info=function(){};function kw(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return gc(n)}catch{return e}}var Nn={},hu=null;function Ki(){return hu=hu||new Oe}Nn.Ma="serverreachability";function Vf(t){qe.call(this,Nn.Ma,t)}$e(Vf,qe);function tr(t){const e=Ki();Fe(e,new Vf(e))}Nn.STAT_EVENT="statevent";function $f(t,e){qe.call(this,Nn.STAT_EVENT,t),this.stat=e}$e($f,qe);function We(t){const e=Ki();Fe(e,new $f(e,t))}Nn.Na="timingevent";function Uf(t,e){qe.call(this,Nn.Na,t),this.size=e}$e(Uf,qe);function pr(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}var zi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Bf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wc(){}wc.prototype.h=null;function fu(t){return t.h||(t.h=t.i())}function jf(){}var gr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ec(){qe.call(this,"d")}$e(Ec,qe);function _c(){qe.call(this,"c")}$e(_c,qe);var ma;function Gi(){}$e(Gi,wc);Gi.prototype.g=function(){return new XMLHttpRequest};Gi.prototype.i=function(){return{}};ma=new Gi;function mr(t,e,n,s){this.l=t,this.j=e,this.m=n,this.X=s||1,this.V=new er(this),this.P=Ow,t=ua?125:void 0,this.W=new qi(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qf}function qf(){this.i=null,this.g="",this.h=!1}var Ow=45e3,ya={},gi={};N=mr.prototype;N.setTimeout=function(t){this.P=t};function va(t,e,n){t.K=1,t.v=Qi(Mt(e)),t.s=n,t.U=!0,Hf(t,null)}function Hf(t,e){t.F=Date.now(),yr(t),t.A=Mt(t.v);var n=t.A,s=t.X;Array.isArray(s)||(s=[String(s)]),Yf(n.h,"t",s),t.C=0,n=t.l.H,t.h=new qf,t.g=yd(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Aw(Le(t.Ia,t,t.g),t.O)),Lf(t.V,t.g,"readystatechange",t.gb),e=t.H?Tf(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),tr(),Dw(t.j,t.u,t.A,t.m,t.X,t.s)}N.gb=function(t){t=t.target;const e=this.L;e&&Dt(t)==3?e.l():this.Ia(t)};N.Ia=function(t){try{if(t==this.g)e:{const u=Dt(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>u)&&(u!=3||ua||this.g&&(this.h.h||this.g.ga()||mu(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?tr(3):tr(2)),Wi(this);var n=this.g.ba();this.N=n;t:if(Kf(this)){var s=mu(this.g);t="";var r=s.length,i=Dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Fs(this);var o="";break t}this.h.i=new j.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,xw(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!di(a)){var l=a;break t}}l=null}if(n=l)Kn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wa(this,n);else{this.i=!1,this.o=3,We(12),gn(this),Fs(this);break e}}this.U?(zf(this,u,o),ua&&this.i&&u==3&&(Lf(this.V,this.W,"tick",this.fb),this.W.start())):(Kn(this.j,this.m,o,null),wa(this,o)),u==4&&gn(this),this.i&&!this.I&&(u==4?dd(this.l,this):(this.i=!1,yr(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,We(12)):(this.o=0,We(13)),gn(this),Fs(this)}}}catch{}finally{}};function Kf(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function zf(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=Rw(t,n),r==gi){e==4&&(t.o=4,We(14),s=!1),Kn(t.j,t.m,null,"[Incomplete Response]");break}else if(r==ya){t.o=4,We(15),Kn(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Kn(t.j,t.m,r,null),wa(t,r);Kf(t)&&r!=gi&&r!=ya&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,We(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nc(e),e.L=!0,We(11))):(Kn(t.j,t.m,n,"[Invalid Chunked Response]"),gn(t),Fs(t))}N.fb=function(){if(this.g){var t=Dt(this.g),e=this.g.ga();this.C<e.length&&(Wi(this),zf(this,t,e),this.i&&t!=4&&yr(this))}};function Rw(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?gi:(n=Number(e.substring(n,s)),isNaN(n)?ya:(s+=1,s+n>e.length?gi:(e=e.substr(s,n),t.C=s+n,e)))}N.cancel=function(){this.I=!0,gn(this)};function yr(t){t.Y=Date.now()+t.P,Gf(t,t.P)}function Gf(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=pr(Le(t.eb,t),e)}function Wi(t){t.B&&(j.clearTimeout(t.B),t.B=null)}N.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(Nw(this.j,this.A),this.K!=2&&(tr(),We(17)),gn(this),this.o=2,Fs(this)):Gf(this,this.Y-t)};function Fs(t){t.l.G==0||t.I||dd(t.l,t)}function gn(t){Wi(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,yc(t.W),Ff(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function wa(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Ea(n.i,t))){if(n.I=t.N,!t.J&&Ea(n.i,t)&&n.G==3){try{var s=n.Ca.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)wi(n),Ji(n);else break e;xc(n),We(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&n.A==0&&!n.v&&(n.v=pr(Le(n.ab,n),6e3));if(1>=ed(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else mn(n,11)}else if((t.J||n.g==t)&&wi(n),!di(e))for(r=n.Ca.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(n.U=l[0],l=l[1],n.G==2)if(l[0]=="c"){n.J=l[1],n.la=l[2];const u=l[3];u!=null&&(n.ma=u,n.h.info("VER="+n.ma));const h=l[4];h!=null&&(n.za=h,n.h.info("SVER="+n.za));const p=l[5];p!=null&&typeof p=="number"&&0<p&&(s=1.5*p,n.K=s,n.h.info("backChannelRequestTimeoutMs_="+s)),s=n;const g=t.g;if(g){const b=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var i=s.i;!i.g&&(ze(b,"spdy")||ze(b,"quic")||ze(b,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Ic(i,i.h),i.h=null))}if(s.D){const D=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(s.sa=D,me(s.F,s.D,D))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),s=n;var o=t;if(s.oa=md(s,s.H?s.la:null,s.W),o.J){td(s.i,o);var a=o,c=s.K;c&&a.setTimeout(c),a.B&&(Wi(a),yr(a)),s.g=o}else hd(s);0<n.l.length&&Zi(n)}else l[0]!="stop"&&l[0]!="close"||mn(n,7);else n.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?mn(n,7):Dc(n):l[0]!="noop"&&n.j&&n.j.wa(l),n.A=0)}}tr(4)}catch{}}function Mw(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(la(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function bc(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(la(t)||typeof t=="string")bf(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(la(t)||typeof t=="string"){n=[];for(var s=t.length,r=0;r<s;r++)n.push(r)}else for(r in n=[],s=0,t)n[s++]=r;s=Mw(t),r=s.length;for(var i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}}function ms(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var s=0;s<n;s+=2)this.set(arguments[s],arguments[s+1])}else if(t)if(t instanceof ms)for(n=t.T(),s=0;s<n.length;s++)this.set(n[s],t.get(n[s]));else for(s in t)this.set(s,t[s])}N=ms.prototype;N.R=function(){Tc(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};N.T=function(){return Tc(this),this.g.concat()};function Tc(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var s=t.g[e];Cn(t.h,s)&&(t.g[n++]=s),e++}t.g.length=n}if(t.i!=t.g.length){var r={};for(n=e=0;e<t.g.length;)s=t.g[e],Cn(r,s)||(t.g[n++]=s,r[s]=1),e++;t.g.length=n}}N.get=function(t,e){return Cn(this.h,t)?this.h[t]:e};N.set=function(t,e){Cn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};N.forEach=function(t,e){for(var n=this.T(),s=0;s<n.length;s++){var r=n[s],i=this.get(r);t.call(e,i,r,this)}};function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Wf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pw(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function An(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof An){this.g=e!==void 0?e:t.g,mi(this,t.j),this.s=t.s,yi(this,t.i),vi(this,t.m),this.l=t.l,e=t.h;var n=new nr;n.i=e.i,e.g&&(n.g=new ms(e.g),n.h=e.h),du(this,n),this.o=t.o}else t&&(n=String(t).match(Wf))?(this.g=!!e,mi(this,n[1]||"",!0),this.s=Vs(n[2]||""),yi(this,n[3]||"",!0),vi(this,n[4]),this.l=Vs(n[5]||"",!0),du(this,n[6]||"",!0),this.o=Vs(n[7]||"")):(this.g=!!e,this.h=new nr(null,this.g))}An.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xs(e,pu,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xs(e,pu,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(xs(n,n.charAt(0)=="/"?Uw:$w,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xs(n,jw)),t.join("")};function Mt(t){return new An(t)}function mi(t,e,n){t.j=n?Vs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function yi(t,e,n){t.i=n?Vs(e,!0):e}function vi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function du(t,e,n){e instanceof nr?(t.h=e,qw(t.h,t.g)):(n||(e=xs(e,Bw)),t.h=new nr(e,t.g))}function me(t,e,n){t.h.set(e,n)}function Qi(t){return me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Lw(t){return t instanceof An?Mt(t):new An(t,void 0)}function Fw(t,e,n,s){var r=new An(null,void 0);return t&&mi(r,t),e&&yi(r,e),n&&vi(r,n),s&&(r.l=s),r}function Vs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Vw),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vw(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var pu=/[#\/\?@]/g,$w=/[#\?:]/g,Uw=/[#\?]/g,Bw=/[#\?@]/g,jw=/#/g;function nr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sn(t){t.g||(t.g=new ms,t.h=0,t.i&&Pw(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=nr.prototype;N.add=function(t,e){sn(this),this.i=null,t=ys(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Qf(t,e){sn(t),e=ys(t,e),Cn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Cn(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Tc(t)))}function Xf(t,e){return sn(t),e=ys(t,e),Cn(t.g.h,e)}N.forEach=function(t,e){sn(this),this.g.forEach(function(n,s){bf(n,function(r){t.call(e,r,s,this)},this)},this)};N.T=function(){sn(this);for(var t=this.g.R(),e=this.g.T(),n=[],s=0;s<e.length;s++)for(var r=t[s],i=0;i<r.length;i++)n.push(e[s]);return n};N.R=function(t){sn(this);var e=[];if(typeof t=="string")Xf(this,t)&&(e=ru(e,this.g.get(ys(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ru(e,t[n])}return e};N.set=function(t,e){return sn(this),this.i=null,t=ys(this,t),Xf(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function Yf(t,e,n){Qf(t,e),0<n.length&&(t.i=null,t.g.set(ys(t,e),cc(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var s=e[n],r=encodeURIComponent(String(s));s=this.R(s);for(var i=0;i<s.length;i++){var o=r;s[i]!==""&&(o+="="+encodeURIComponent(String(s[i]))),t.push(o)}}return this.i=t.join("&")};function ys(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qw(t,e){e&&!t.j&&(sn(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Qf(this,s),Yf(this,r,n))},t)),t.j=e}var Hw=class{constructor(t,e){this.h=t,this.g=e}};function Jf(t){this.l=t||Kw,j.PerformanceNavigationTiming?(t=j.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(j.g&&j.g.Ea&&j.g.Ea()&&j.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kw=10;function Zf(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ed(t){return t.h?1:t.g?t.g.size:0}function Ea(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ic(t,e){t.g?t.g.add(e):t.h=e}function td(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Jf.prototype.cancel=function(){if(this.i=nd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function nd(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return cc(t.i)}function Sc(){}Sc.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)};Sc.prototype.parse=function(t){return j.JSON.parse(t,void 0)};function zw(){this.g=new Sc}function Gw(t,e,n){const s=n||"";try{bc(t,function(r,i){let o=r;fr(r)&&(o=gc(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Ww(t,e){const n=new Hi;if(j.Image){const s=new Image;s.onload=Lr(Vr,n,s,"TestLoadImage: loaded",!0,e),s.onerror=Lr(Vr,n,s,"TestLoadImage: error",!1,e),s.onabort=Lr(Vr,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=Lr(Vr,n,s,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function Vr(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function vr(t){this.l=t.$b||null,this.j=t.ib||!1}$e(vr,wc);vr.prototype.g=function(){return new Xi(this.l,this.j)};vr.prototype.i=function(t){return function(){return t}}({});function Xi(t,e){Oe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Cc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$e(Xi,Oe);var Cc=0;N=Xi.prototype;N.open=function(t,e){if(this.readyState!=Cc)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,sr(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||j).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=Cc};N.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof j.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sd(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function sd(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}N.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?wr(this):sr(this),this.readyState==3&&sd(this)}};N.Ua=function(t){this.g&&(this.response=this.responseText=t,wr(this))};N.Ta=function(t){this.g&&(this.response=t,wr(this))};N.ha=function(){this.g&&wr(this)};function wr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,sr(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function sr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Qw=j.JSON.parse;function Se(t){Oe.call(this),this.headers=new ms,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rd,this.K=this.L=!1}$e(Se,Oe);var rd="",Xw=/^https?$/i,Yw=["POST","PUT"];N=Se.prototype;N.ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ma.g(),this.C=this.u?fu(this.u):fu(ma),this.g.onreadystatechange=Le(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){gu(this,i);return}t=n||"";const r=new ms(this.headers);s&&bc(s,function(i,o){r.set(o,i)}),s=cw(r.T()),n=j.FormData&&t instanceof j.FormData,!(0<=_f(Yw,e))||s||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(i,o){this.g.setRequestHeader(o,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ad(this),0<this.B&&((this.K=Jw(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Le(this.pa,this)):this.A=vc(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){gu(this,i)}};function Jw(t){return ns&&dw()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function Zw(t){return t.toLowerCase()=="content-type"}N.pa=function(){typeof ac<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fe(this,"timeout"),this.abort(8))};function gu(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,id(t),Yi(t)}function id(t){t.D||(t.D=!0,Fe(t,"complete"),Fe(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Fe(this,"complete"),Fe(this,"abort"),Yi(this))};N.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yi(this,!0)),Se.Z.M.call(this)};N.Fa=function(){this.s||(this.F||this.v||this.l?od(this):this.cb())};N.cb=function(){od(this)};function od(t){if(t.h&&typeof ac<"u"&&(!t.C[1]||Dt(t)!=4||t.ba()!=2)){if(t.v&&Dt(t)==4)vc(t.Fa,0,t);else if(Fe(t,"readystatechange"),Dt(t)==4){t.h=!1;try{const a=t.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(Wf)[1]||null;if(!r&&j.self&&j.self.location){var i=j.self.location.protocol;r=i.substr(0,i.length-1)}s=!Xw.test(r?r.toLowerCase():"")}n=s}if(n)Fe(t,"complete"),Fe(t,"success");else{t.m=6;try{var o=2<Dt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.ba()+"]",id(t)}}finally{Yi(t)}}}}function Yi(t,e){if(t.g){ad(t);const n=t.g,s=t.C[0]?fi:null;t.g=null,t.C=null,e||Fe(t,"ready");try{n.onreadystatechange=s}catch{}}}function ad(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(j.clearTimeout(t.A),t.A=null)}function Dt(t){return t.g?t.g.readyState:0}N.ba=function(){try{return 2<Dt(this)?this.g.status:-1}catch{return-1}};N.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Qw(e)}};function mu(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case rd:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}N.Da=function(){return this.m};N.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function eE(t){let e="";return lc(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Ac(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=eE(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):me(t,e,n))}function Cs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function cd(t){this.za=0,this.l=[],this.h=new Hi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cs("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cs("baseRetryDelayMs",5e3,t),this.$a=Cs("retryDelaySeedMs",1e4,t),this.Ya=Cs("forwardChannelMaxRetries",2,t),this.ra=Cs("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Jf(t&&t.concurrentRequestLimit),this.Ca=new zw,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}N=cd.prototype;N.ma=8;N.G=1;function Dc(t){if(ld(t),t.G==3){var e=t.V++,n=Mt(t.F);me(n,"SID",t.J),me(n,"RID",e),me(n,"TYPE","terminate"),Er(t,n),e=new mr(t,t.h,e,void 0),e.K=2,e.v=Qi(Mt(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.v.toString(),"")),!n&&j.Image&&(new Image().src=e.v,n=!0),n||(e.g=yd(e.l,null),e.g.ea(e.v)),e.F=Date.now(),yr(e)}gd(t)}N.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Ji(t){t.g&&(Nc(t),t.g.cancel(),t.g=null)}function ld(t){Ji(t),t.u&&(j.clearTimeout(t.u),t.u=null),wi(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&j.clearTimeout(t.m),t.m=null)}function Oo(t,e){t.l.push(new Hw(t.Za++,e)),t.G==3&&Zi(t)}function Zi(t){Zf(t.i)||t.m||(t.m=!0,mc(t.Ha,t),t.C=0)}function tE(t,e){return ed(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=pr(Le(t.Ha,t,e),pd(t,t.C)),t.C++,!0)}N.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const r=new mr(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=Tf(i),If(i,this.P)):i=this.P),this.o===null&&(r.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var s=this.l[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ud(this,r,e),n=Mt(this.F),me(n,"RID",t),me(n,"CVER",22),this.D&&me(n,"X-HTTP-Session-Id",this.D),Er(this,n),this.o&&i&&Ac(n,this.o,i),Ic(this.i,r),this.Ra&&me(n,"TYPE","init"),this.ja?(me(n,"$req",e),me(n,"SID","null"),r.$=!0,va(r,n,null)):va(r,n,e),this.G=2}}else this.G==3&&(t?yu(this,t):this.l.length==0||Zf(this.i)||yu(this))};function yu(t,e){var n;e?n=e.m:n=t.V++;const s=Mt(t.F);me(s,"SID",t.J),me(s,"RID",n),me(s,"AID",t.U),Er(t,s),t.o&&t.s&&Ac(s,t.o,t.s),n=new mr(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ud(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Ic(t.i,n),va(n,s,e)}function Er(t,e){t.j&&bc({},function(n,s){me(e,s,n)})}function ud(t,e,n){n=Math.min(t.l.length,n);var s=t.j?Le(t.j.Oa,t.j,t):null;e:{var r=t.l;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let c=0;c<n;c++){let l=r[c].h;const u=r[c].g;if(l-=i,0>l)i=Math.max(0,r[c].h-100),a=!1;else try{Gw(u,o,"req"+l+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,s}function hd(t){t.g||t.u||(t.Y=1,mc(t.Ga,t),t.A=0)}function xc(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=pr(Le(t.Ga,t),pd(t,t.A)),t.A++,!0)}N.Ga=function(){if(this.u=null,fd(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=pr(Le(this.bb,this),t)}};N.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,We(10),Ji(this),fd(this))};function Nc(t){t.B!=null&&(j.clearTimeout(t.B),t.B=null)}function fd(t){t.g=new mr(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Mt(t.oa);me(e,"RID","rpc"),me(e,"SID",t.J),me(e,"CI",t.N?"0":"1"),me(e,"AID",t.U),Er(t,e),me(e,"TYPE","xmlhttp"),t.o&&t.s&&Ac(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Qi(Mt(e)),n.s=null,n.U=!0,Hf(n,t)}N.ab=function(){this.v!=null&&(this.v=null,Ji(this),xc(this),We(19))};function wi(t){t.v!=null&&(j.clearTimeout(t.v),t.v=null)}function dd(t,e){var n=null;if(t.g==e){wi(t),Nc(t),t.g=null;var s=2}else if(Ea(t.i,e))n=e.D,td(t.i,e),s=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=Ki(),Fe(s,new Uf(s,n)),Zi(t)}else hd(t);else if(r=e.o,r==3||r==0&&0<t.I||!(s==1&&tE(t,e)||s==2&&xc(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:mn(t,5);break;case 4:mn(t,10);break;case 3:mn(t,6);break;default:mn(t,2)}}}function pd(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function mn(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var s=Le(t.jb,t);n||(n=new An("//www.google.com/images/cleardot.gif"),j.location&&j.location.protocol=="http"||mi(n,"https"),Qi(n)),Ww(n.toString(),s)}else We(2);t.G=0,t.j&&t.j.va(e),gd(t),ld(t)}N.jb=function(t){t?(this.h.info("Successfully pinged google.com"),We(2)):(this.h.info("Failed to ping google.com"),We(1))};function gd(t){t.G=0,t.I=-1,t.j&&((nd(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,cc(t.l),t.l.length=0),t.j.ua())}function md(t,e,n){let s=Lw(n);if(s.i!="")e&&yi(s,e+"."+s.i),vi(s,s.m);else{const r=j.location;s=Fw(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.aa&&lc(t.aa,function(r,i){me(s,i,r)}),e=t.D,n=t.sa,e&&n&&me(s,e,n),me(s,"VER",t.ma),Er(t,s),s}function yd(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Se(new vr({ib:!0})):new Se(t.qa),e.L=t.H,e}function vd(){}N=vd.prototype;N.xa=function(){};N.wa=function(){};N.va=function(){};N.ua=function(){};N.Oa=function(){};function Ei(){if(ns&&!(10<=Number(pw)))throw Error("Environmental error: no available transport.")}Ei.prototype.g=function(t,e){return new rt(t,e)};function rt(t,e){Oe.call(this),this.g=new cd(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!di(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!di(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vs(this)}$e(rt,Oe);rt.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),mc(Le(t.hb,t,e))),We(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=md(t,null,t.W),Zi(t)};rt.prototype.close=function(){Dc(this.g)};rt.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,Oo(this.g,e)}else this.v?(e={},e.__data__=gc(t),Oo(this.g,e)):Oo(this.g,t)};rt.prototype.M=function(){this.g.j=null,delete this.j,Dc(this.g),delete this.g,rt.Z.M.call(this)};function wd(t){Ec.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}$e(wd,Ec);function Ed(){_c.call(this),this.status=1}$e(Ed,_c);function vs(t){this.g=t}$e(vs,vd);vs.prototype.xa=function(){Fe(this.g,"a")};vs.prototype.wa=function(t){Fe(this.g,new wd(t))};vs.prototype.va=function(t){Fe(this.g,new Ed)};vs.prototype.ua=function(){Fe(this.g,"b")};Ei.prototype.createWebChannel=Ei.prototype.g;rt.prototype.send=rt.prototype.u;rt.prototype.open=rt.prototype.m;rt.prototype.close=rt.prototype.close;zi.NO_ERROR=0;zi.TIMEOUT=8;zi.HTTP_ERROR=6;Bf.COMPLETE="complete";jf.EventType=gr;gr.OPEN="a";gr.CLOSE="b";gr.ERROR="c";gr.MESSAGE="d";Oe.prototype.listen=Oe.prototype.N;Se.prototype.listenOnce=Se.prototype.O;Se.prototype.getLastError=Se.prototype.La;Se.prototype.getLastErrorCode=Se.prototype.Da;Se.prototype.getStatus=Se.prototype.ba;Se.prototype.getResponseJson=Se.prototype.Qa;Se.prototype.getResponseText=Se.prototype.ga;Se.prototype.send=Se.prototype.ea;var nE=function(){return new Ei},sE=function(){return Ki()},Ro=zi,rE=Bf,iE=Nn,vu={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},oE=vr,$r=jf,aE=Se;const wu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ws="9.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new gf("@firebase/firestore");function Eu(){return Dn.logLevel}function R(t,...e){if(Dn.logLevel<=ne.DEBUG){const n=e.map(kc);Dn.debug(`Firestore (${ws}): ${t}`,...n)}}function Pt(t,...e){if(Dn.logLevel<=ne.ERROR){const n=e.map(kc);Dn.error(`Firestore (${ws}): ${t}`,...n)}}function _u(t,...e){if(Dn.logLevel<=ne.WARN){const n=e.map(kc);Dn.warn(`Firestore (${ws}): ${t}`,...n)}}function kc(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${ws}) INTERNAL ASSERTION FAILED: `+t;throw Pt(e),new Error(e)}function de(t,e){t||H()}function z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xe.UNAUTHENTICATED))}shutdown(){}}class uE{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new En;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new En,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new En)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(de(typeof s.accessToken=="string"),new cE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new Xe(e)}}class hE{constructor(e,n,s){this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class fE{constructor(e,n,s){this.h=e,this.l=n,this.m=s}getToken(){return Promise.resolve(new hE(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const s=i=>{i.error!=null&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.p;return this.p=i.token,R("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?r(i):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.p=n.token,new dE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=gE(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function se(t,e){return t<e?-1:t>e?1:0}function ss(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new F(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Ce(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.timestamp=e}static fromTimestamp(e){return new W(e)}static min(){return new W(new Ce(0,0))}static max(){return new W(new Ce(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,s){n===void 0?n=0:n>e.length&&H(),s===void 0?s=e.length-n:s>e.length-n&&H(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends rr{construct(e,n,s){return new ye(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new F(E.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const mE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class je extends rr{construct(e,n,s){return new je(e,n,s)}static isValidIdentifier(e){return mE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new je(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new F(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new F(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new F(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new F(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new je(n)}static emptyPath(){return new je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.path=e}static fromPath(e){return new V(ye.fromString(e))}static fromName(e){return new V(ye.fromString(e).popFirst(5))}static empty(){return new V(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new ye(e.slice()))}}function yE(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=W.fromTimestamp(s===1e9?new Ce(n+1,0):new Ce(n,s));return new Zt(r,V.empty(),e)}function vE(t){return new Zt(t.readTime,t.key,-1)}class Zt{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Zt(W.min(),V.empty(),-1)}static max(){return new Zt(W.max(),V.empty(),-1)}}function wE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _E{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _r(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==EE)throw t;R("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _?n:_.resolve(n)}catch(n){return _.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_.reject(n)}static resolve(e){return new _((n,s)=>{n(e)})}static reject(e){return new _((n,s)=>{s(e)})}static waitFor(e){return new _((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},c=>s(c))}),o=!0,i===r&&n()})}static or(e){let n=_.resolve(!1);for(const s of e)n=n.next(r=>r?_.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new _((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const l=c;n(e[l]).next(u=>{o[l]=u,++a,a===i&&s(o)},u=>r(u))}})}static doWhile(e,n){return new _((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function br(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.it(s),this.rt=s=>n.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function kn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oc.ot=-1;class De{constructor(e,n){this.comparator=e,this.root=n||Re.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Re.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Re.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ur(this.root,e,this.comparator,!0)}}class Ur{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Re{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Re.RED,this.left=r!=null?r:Re.EMPTY,this.right=i!=null?i:Re.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Re(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Re.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Re.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Re.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Re.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}Re.EMPTY=null,Re.RED=!0,Re.BLACK=!1;Re.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Re(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Tu(this.data.getIterator())}getIteratorFrom(e){return new Tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ae)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ae(this.comparator);return n.data=e,n}}class Tu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.fields=e,e.sort(je.comparator)}static empty(){return new at([])}unionWith(e){let n=new Ae(je.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new at(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ss(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ve(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Ve(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ve.EMPTY_BYTE_STRING=new Ve("");const bE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(t){if(de(!!t),typeof t=="string"){let e=0;const n=bE.exec(t);if(de(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?Ve.fromBase64String(t):Ve.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Id(t){const e=t.mapValue.fields.__previous_value__;return Td(e)?Id(e):e}function ir(t){const e=en(t.mapValue.fields.__local_write_time__.timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,s,r,i,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}}class is{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new is("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof is&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){return t==null}function _i(t){return t===0&&1/t==-1/0}function IE(t){return typeof t=="number"&&Number.isInteger(t)&&!_i(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Td(t)?4:SE(t)?9007199254740991:10:H()}function Tt(t,e){if(t===e)return!0;const n=xn(t);if(n!==xn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ir(t).isEqual(ir(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=en(s.timestampValue),o=en(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return rs(s.bytesValue).isEqual(rs(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Te(s.geoPointValue.latitude)===Te(r.geoPointValue.latitude)&&Te(s.geoPointValue.longitude)===Te(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Te(s.integerValue)===Te(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=Te(s.doubleValue),o=Te(r.doubleValue);return i===o?_i(i)===_i(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ss(t.arrayValue.values||[],e.arrayValue.values||[],Tt);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(bu(i)!==bu(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Tt(i[a],o[a])))return!1;return!0}(t,e);default:return H()}}function or(t,e){return(t.values||[]).find(n=>Tt(n,e))!==void 0}function os(t,e){if(t===e)return 0;const n=xn(t),s=xn(e);if(n!==s)return se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=Te(r.integerValue||r.doubleValue),a=Te(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return Iu(t.timestampValue,e.timestampValue);case 4:return Iu(ir(t),ir(e));case 5:return se(t.stringValue,e.stringValue);case 6:return function(r,i){const o=rs(r),a=rs(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let c=0;c<o.length&&c<a.length;c++){const l=se(o[c],a[c]);if(l!==0)return l}return se(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=se(Te(r.latitude),Te(i.latitude));return o!==0?o:se(Te(r.longitude),Te(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let c=0;c<o.length&&c<a.length;++c){const l=os(o[c],a[c]);if(l)return l}return se(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===Br.mapValue&&i===Br.mapValue)return 0;if(r===Br.mapValue)return 1;if(i===Br.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),c=i.fields||{},l=Object.keys(c);a.sort(),l.sort();for(let u=0;u<a.length&&u<l.length;++u){const h=se(a[u],l[u]);if(h!==0)return h;const p=os(o[a[u]],c[l[u]]);if(p!==0)return p}return se(a.length,l.length)}(t.mapValue,e.mapValue);default:throw H()}}function Iu(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=en(t),s=en(e),r=se(n.seconds,s.seconds);return r!==0?r:se(n.nanos,s.nanos)}function Xn(t){return _a(t)}function _a(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=en(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?rs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,V.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=_a(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${_a(s.fields[a])}`;return i+"}"}(t.mapValue):H();var e,n}function ba(t){return!!t&&"integerValue"in t}function Rc(t){return!!t&&"arrayValue"in t}function Su(t){return!!t&&"nullValue"in t}function Cu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jr(t){return!!t&&"mapValue"in t}function $s(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return kn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=$s(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$s(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.value=e}static empty(){return new Ye({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Jr(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$s(n)}setAll(e){let n=je.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=$s(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Jr(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Jr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){kn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ye($s(this.value))}}function Sd(t){const e=[];return kn(t.fields,(n,s)=>{const r=new je([n]);if(Jr(s)){const i=Sd(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new at(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Me(e,0,W.min(),W.min(),Ye.empty(),0)}static newFoundDocument(e,n,s){return new Me(e,1,n,W.min(),s,0)}static newNoDocument(e,n){return new Me(e,2,n,W.min(),Ye.empty(),0)}static newUnknownDocument(e,n){return new Me(e,3,n,W.min(),Ye.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ye.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ye.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ut=null}}function Au(t,e=null,n=[],s=[],r=null,i=null,o=null){return new CE(t,e,n,s,r,i,o)}function Mc(t){const e=z(t);if(e.ut===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+Xn(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),eo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xn(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xn(s)).join(",")),e.ut=n}return e.ut}function AE(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${Xn(s.value)}`;var s}).join(", ")}]`),eo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Xn(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Xn(n)).join(",")),`Target(${e})`}function Pc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!PE(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!Tt(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xu(t.startAt,e.startAt)&&xu(t.endAt,e.endAt)}function Ta(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Je extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.ct(e,n,s):new DE(e,n,s):n==="array-contains"?new kE(e,s):n==="in"?new OE(e,s):n==="not-in"?new RE(e,s):n==="array-contains-any"?new ME(e,s):new Je(e,n,s)}static ct(e,n,s){return n==="in"?new xE(e,s):new NE(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.at(os(n,this.value)):n!==null&&xn(this.value)===xn(n)&&this.at(os(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class DE extends Je{constructor(e,n,s){super(e,n,s),this.key=V.fromName(s.referenceValue)}matches(e){const n=V.comparator(e.key,this.key);return this.at(n)}}class xE extends Je{constructor(e,n){super(e,"in",n),this.keys=Cd("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NE extends Je{constructor(e,n){super(e,"not-in",n),this.keys=Cd("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cd(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>V.fromName(s.referenceValue))}class kE extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rc(n)&&or(n.arrayValue,this.value)}}class OE extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&or(this.value.arrayValue,n)}}class RE extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(or(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!or(this.value.arrayValue,n)}}class ME extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>or(this.value.arrayValue,s))}}class bi{constructor(e,n){this.position=e,this.inclusive=n}}class Yn{constructor(e,n="asc"){this.field=e,this.dir=n}}function PE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Du(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=V.comparator(V.fromName(o.referenceValue),n.key):s=os(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function xu(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.lt=null,this.ft=null,this.startAt,this.endAt}}function LE(t,e,n,s,r,i,o,a){return new Tr(t,e,n,s,r,i,o,a)}function Lc(t){return new Tr(t)}function Nu(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ad(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Dd(t){for(const e of t.filters)if(e.ht())return e.field;return null}function FE(t){return t.collectionGroup!==null}function ar(t){const e=z(t);if(e.lt===null){e.lt=[];const n=Dd(e),s=Ad(e);if(n!==null&&s===null)n.isKeyField()||e.lt.push(new Yn(n)),e.lt.push(new Yn(je.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e.lt.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Yn(je.keyField(),i))}}}return e.lt}function Lt(t){const e=z(t);if(!e.ft)if(e.limitType==="F")e.ft=Au(e.path,e.collectionGroup,ar(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of ar(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Yn(i.field,o))}const s=e.endAt?new bi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new bi(e.startAt.position,e.startAt.inclusive):null;e.ft=Au(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.ft}function Ia(t,e,n){return new Tr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function to(t,e){return Pc(Lt(t),Lt(e))&&t.limitType===e.limitType}function xd(t){return`${Mc(Lt(t))}|lt:${t.limitType}`}function Sa(t){return`Query(target=${AE(Lt(t))}; limitType=${t.limitType})`}function Fc(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):V.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=Du(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,ar(n),s)||n.endAt&&!function(r,i,o){const a=Du(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,ar(n),s))}(t,e)}function VE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Nd(t){return(e,n)=>{let s=!1;for(const r of ar(t)){const i=$E(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function $E(t,e,n){const s=t.field.isKeyField()?V.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),c=o.data.field(r);return a!==null&&c!==null?os(a,c):H()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return H()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_i(e)?"-0":e}}function Od(t){return{integerValue:""+t}}function UE(t,e){return IE(e)?Od(e):kd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this._=void 0}}function BE(t,e,n){return t instanceof Ti?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof cr?Md(t,e):t instanceof lr?Pd(t,e):function(s,r){const i=Rd(s,r),o=ku(i)+ku(s._t);return ba(i)&&ba(s._t)?Od(o):kd(s.wt,o)}(t,e)}function jE(t,e,n){return t instanceof cr?Md(t,e):t instanceof lr?Pd(t,e):n}function Rd(t,e){return t instanceof Ii?ba(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Ti extends no{}class cr extends no{constructor(e){super(),this.elements=e}}function Md(t,e){const n=Ld(e);for(const s of t.elements)n.some(r=>Tt(r,s))||n.push(s);return{arrayValue:{values:n}}}class lr extends no{constructor(e){super(),this.elements=e}}function Pd(t,e){let n=Ld(e);for(const s of t.elements)n=n.filter(r=>!Tt(r,s));return{arrayValue:{values:n}}}class Ii extends no{constructor(e,n){super(),this.wt=e,this._t=n}}function ku(t){return Te(t.integerValue||t.doubleValue)}function Ld(t){return Rc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qE(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof cr&&s instanceof cr||n instanceof lr&&s instanceof lr?ss(n.elements,s.elements,Tt):n instanceof Ii&&s instanceof Ii?Tt(n._t,s._t):n instanceof Ti&&s instanceof Ti}(t.transform,e.transform)}class HE{constructor(e,n){this.version=e,this.transformResults=n}}class mt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zr(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class so{}function Fd(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vc(t.key,mt.none()):new Ir(t.key,t.data,mt.none());{const n=t.data,s=Ye.empty();let r=new Ae(je.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new rn(t.key,s,new at(r.toArray()),mt.none())}}function KE(t,e,n){t instanceof Ir?function(s,r,i){const o=s.value.clone(),a=Ru(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof rn?function(s,r,i){if(!Zr(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=Ru(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Vd(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Us(t,e,n,s){return t instanceof Ir?function(r,i,o,a){if(!Zr(r.precondition,i))return o;const c=r.value.clone(),l=Mu(r.fieldTransforms,a,i);return c.setAll(l),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof rn?function(r,i,o,a){if(!Zr(r.precondition,i))return o;const c=Mu(r.fieldTransforms,a,i),l=i.data;return l.setAll(Vd(r)),l.setAll(c),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(t,e,n,s):function(r,i,o){return Zr(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function zE(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Rd(s.transform,r||null);i!=null&&(n===null&&(n=Ye.empty()),n.set(s.field,i))}return n||null}function Ou(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ss(n,s,(r,i)=>qE(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ir extends so{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rn extends so{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vd(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Ru(t,e,n){const s=new Map;de(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,jE(o,a,n[r]))}return s}function Mu(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,BE(i,o,e))}return s}class Vc extends so{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GE extends so{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,J;function QE(t){switch(t){default:return H();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function $d(t){if(t===void 0)return Pt("GRPC error has no .code"),E.UNKNOWN;switch(t){case be.OK:return E.OK;case be.CANCELLED:return E.CANCELLED;case be.UNKNOWN:return E.UNKNOWN;case be.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case be.INTERNAL:return E.INTERNAL;case be.UNAVAILABLE:return E.UNAVAILABLE;case be.UNAUTHENTICATED:return E.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case be.NOT_FOUND:return E.NOT_FOUND;case be.ALREADY_EXISTS:return E.ALREADY_EXISTS;case be.PERMISSION_DENIED:return E.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case be.ABORTED:return E.ABORTED;case be.OUT_OF_RANGE:return E.OUT_OF_RANGE;case be.UNIMPLEMENTED:return E.UNIMPLEMENTED;case be.DATA_LOSS:return E.DATA_LOSS;default:return H()}}(J=be||(be={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){kn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return bd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new De(V.comparator);function Ft(){return XE}const Ud=new De(V.comparator);function Ns(...t){let e=Ud;for(const n of t)e=e.insert(n.key,n);return e}function Bd(t){let e=Ud;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function yn(){return Bs()}function jd(){return Bs()}function Bs(){return new Es(t=>t.toString(),(t,e)=>t.isEqual(e))}const YE=new De(V.comparator),JE=new Ae(V.comparator);function Q(...t){let e=JE;for(const n of t)e=e.add(n);return e}const ZE=new Ae(se);function qd(){return ZE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const s=new Map;return s.set(e,Sr.createSynthesizedTargetChangeForCurrentChange(e,n)),new ro(W.min(),s,qd(),Ft(),Q())}}class Sr{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Sr(Ve.EMPTY_BYTE_STRING,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,s,r){this.gt=e,this.removedTargetIds=n,this.key=s,this.yt=r}}class Hd{constructor(e,n){this.targetId=e,this.It=n}}class Kd{constructor(e,n,s=Ve.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Pu{constructor(){this.Tt=0,this.Et=Fu(),this.At=Ve.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return this.Tt!==0}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Q(),n=Q(),s=Q();return this.Et.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:H()}}),new Sr(this.At,this.Rt,e,n,s)}Dt(){this.bt=!1,this.Et=Fu()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class e0{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Ft(),this.Bt=Lu(),this.Lt=new Ae(se)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const s=this.Qt(n);switch(e.state){case 0:this.jt(n)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(s.Mt(),s.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),s.Vt(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((s,r)=>{this.jt(r)&&n(r)})}zt(e){const n=e.targetId,s=e.It.count,r=this.Ht(n);if(r){const i=r.target;if(Ta(i))if(s===0){const o=new V(i.path);this.Kt(n,o,Me.newNoDocument(o,W.min()))}else de(s===1);else this.Jt(n)!==s&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((i,o)=>{const a=this.Ht(o);if(a){if(i.current&&Ta(a.target)){const c=new V(a.target.path);this.$t.get(c)!==null||this.Xt(o,c)||this.Kt(o,c,Me.newNoDocument(c,e))}i.vt&&(n.set(o,i.St()),i.Dt())}});let s=Q();this.Bt.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const l=this.Ht(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.$t.forEach((i,o)=>o.setReadTime(e));const r=new ro(e,n,this.Lt,this.$t,s);return this.$t=Ft(),this.Bt=Lu(),this.Lt=new Ae(se),r}qt(e,n){if(!this.jt(e))return;const s=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,s),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,s){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,n)?r.Ct(n,1):r.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),s&&(this.$t=this.$t.insert(n,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new Pu,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new Ae(se),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=this.Ht(e)!==null;return n||R("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new Pu),this.Ot.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Ot.getRemoteKeysForTarget(e).has(n)}}function Lu(){return new De(V.comparator)}function Fu(){return new De(V.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),n0=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class s0{constructor(e,n){this.databaseId=e,this.dt=n}}function Si(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zd(t,e){return t.dt?e.toBase64():e.toUint8Array()}function r0(t,e){return Si(t,e.toTimestamp())}function kt(t){return de(!!t),W.fromTimestamp(function(e){const n=en(e);return new Ce(n.seconds,n.nanos)}(t))}function $c(t,e){return function(n){return new ye(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Gd(t){const e=ye.fromString(t);return de(Xd(e)),e}function Ca(t,e){return $c(t.databaseId,e.path)}function Mo(t,e){const n=Gd(e);if(n.get(1)!==t.databaseId.projectId)throw new F(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(Wd(n))}function Aa(t,e){return $c(t.databaseId,e)}function i0(t){const e=Gd(t);return e.length===4?ye.emptyPath():Wd(e)}function Da(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wd(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Vu(t,e,n){return{name:Ca(t,e),fields:n.value.mapValue.fields}}function o0(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,l){return c.dt?(de(l===void 0||typeof l=="string"),Ve.fromBase64String(l||"")):(de(l===void 0||l instanceof Uint8Array),Ve.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const l=c.code===void 0?E.UNKNOWN:$d(c.code);return new F(l,c.message||"")}(o);n=new Kd(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Mo(t,s.document.name),i=kt(s.document.updateTime),o=new Ye({mapValue:{fields:s.document.fields}}),a=Me.newFoundDocument(r,i,o),c=s.targetIds||[],l=s.removedTargetIds||[];n=new ei(c,l,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Mo(t,s.document),i=s.readTime?kt(s.readTime):W.min(),o=Me.newNoDocument(r,i),a=s.removedTargetIds||[];n=new ei([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Mo(t,s.document),i=s.removedTargetIds||[];n=new ei([],i,r,null)}else{if(!("filter"in e))return H();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new WE(r),o=s.targetId;n=new Hd(o,i)}}return n}function a0(t,e){let n;if(e instanceof Ir)n={update:Vu(t,e.key,e.value)};else if(e instanceof Vc)n={delete:Ca(t,e.key)};else if(e instanceof rn)n={update:Vu(t,e.key,e.data),updateMask:y0(e.fieldMask)};else{if(!(e instanceof GE))return H();n={verify:Ca(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Ti)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof cr)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof lr)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ii)return{fieldPath:i.field.canonicalString(),increment:o._t};throw H()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:r0(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:H()}(t,e.precondition)),n}function c0(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?kt(s.updateTime):kt(r);return i.isEqual(W.min())&&(i=kt(r)),new HE(i,s.transformResults||[])}(n,e))):[]}function l0(t,e){return{documents:[Aa(t,e.path)]}}function u0(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=Aa(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Aa(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(c){if(c.length===0)return;const l=c.map(u=>function(h){if(h.op==="=="){if(Cu(h.value))return{unaryFilter:{field:Bn(h.field),op:"IS_NAN"}};if(Su(h.value))return{unaryFilter:{field:Bn(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(Cu(h.value))return{unaryFilter:{field:Bn(h.field),op:"IS_NOT_NAN"}};if(Su(h.value))return{unaryFilter:{field:Bn(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bn(h.field),op:p0(h.op),value:h.value}}}(u));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(c){if(c.length!==0)return c.map(l=>function(u){return{field:Bn(u.field),direction:d0(u.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(c,l){return c.dt||eo(l)?l:{value:l}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function h0(t){let e=i0(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){de(s===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=Qd(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new Yn(zn(h.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,eo(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(u){const h=!!u.before,p=u.values||[];return new bi(p,h)}(n.startAt));let l=null;return n.endAt&&(l=function(u){const h=!u.before,p=u.values||[];return new bi(p,h)}(n.endAt)),LE(e,r,o,i,a,"F",c,l)}function f0(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return H()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qd(t){return t?t.unaryFilter!==void 0?[m0(t)]:t.fieldFilter!==void 0?[g0(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Qd(e)).reduce((e,n)=>e.concat(n)):H():[]}function d0(t){return t0[t]}function p0(t){return n0[t]}function Bn(t){return{fieldPath:t.canonicalString()}}function zn(t){return je.fromServerFormat(t.fieldPath)}function g0(t){return Je.create(zn(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}function m0(t){switch(t.unaryFilter.op){case"IS_NAN":const e=zn(t.unaryFilter.field);return Je.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=zn(t.unaryFilter.field);return Je.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zn(t.unaryFilter.field);return Je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=zn(t.unaryFilter.field);return Je.create(r,"!=",{nullValue:"NULL_VALUE"});default:return H()}}function y0(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Xd(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&KE(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Us(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Us(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=jd();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const c=Fd(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(W.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(n,s)=>Ou(n,s))&&ss(this.baseMutations,e.baseMutations,(n,s)=>Ou(n,s))}}class Uc{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){de(e.mutations.length===s.length);let r=YE;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Uc(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n,s,r,i=W.min(),o=W.min(),a=Ve.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new _n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this.ne=e}}function _0(t){const e=h0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ia(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.ze=new T0}addToCollectionParentIndex(e,n){return this.ze.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(Zt.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(Zt.min())}updateCollectionGroup(e,n,s){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}}class T0{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ae(ye.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ae(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new as(0)}static Rn(){return new as(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?_.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&Us(s.mutation,r,at.empty(),Ce.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Q()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Q()){const r=yn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=Ns();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=yn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Q()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Ft();const o=Bs(),a=Bs();return n.forEach((c,l)=>{const u=s.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof rn)?i=i.insert(l.key,l):u!==void 0&&(o.set(l.key,u.mutation.getFieldMask()),Us(u.mutation,l,u.mutation.getFieldMask(),Ce.now()))}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((l,u)=>o.set(l,u)),n.forEach((l,u)=>{var h;return a.set(l,new S0(u,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Bs();let r=new De((o,a)=>o-a),i=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const l=n.get(c);if(l===null)return;let u=s.get(c)||at.empty();u=a.applyToLocalView(l,u),s.set(c,u);const h=(r.get(a.batchId)||Q()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,u=c.value,h=jd();u.forEach(p=>{if(!i.has(p)){const g=Fd(n.get(p),s.get(p));g!==null&&h.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return _.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return V.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):_.resolve(yn());let a=-1,c=i;return o.next(l=>_.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?_.resolve():this.getBaseDocument(e,u,h).next(p=>{c=c.insert(u,p)}))).next(()=>this.populateOverlays(e,l,i)).next(()=>this.computeViews(e,c,l,Q())).next(u=>({batchId:a,changes:Bd(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(s=>{let r=Ns();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=Ns();return this.indexManager.getCollectionParents(e,r).next(o=>_.forEach(o,a=>{const c=function(l,u){return new Tr(u,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s).next(l=>{l.forEach((u,h)=>{i=i.insert(u,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,c)=>{const l=c.getKey();r.get(l)===null&&(r=r.insert(l,Me.newInvalidDocument(l)))});let o=Ns();return r.forEach((a,c)=>{const l=i.get(a);l!==void 0&&Us(l.mutation,c,at.empty(),Ce.now()),Fc(n,c)&&(o=o.insert(a,c))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):_.resolve(Me.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return _.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var s;return this.Jn.set(n.id,{id:(s=n).id,version:s.version,createTime:kt(s.createTime)}),_.resolve()}getNamedQuery(e,n){return _.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,function(s){return{name:s.name,query:_0(s.bundledQuery),readTime:kt(s.readTime)}}(n)),_.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.overlays=new De(V.comparator),this.Xn=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){const s=yn();return _.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ie(e,n,i)}),_.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Xn.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Xn.delete(s)),_.resolve()}getOverlaysForCollection(e,n,s){const r=yn(),i=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return _.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new De((l,u)=>l-u);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>s){let u=i.get(l.largestBatchId);u===null&&(u=yn(),i=i.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}const a=yn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return _.resolve(a)}ie(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Xn.get(r.largestBatchId).delete(s.key);this.Xn.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new w0(n,s));let i=this.Xn.get(n);i===void 0&&(i=Q(),this.Xn.set(n,i)),this.Xn.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this.Zn=new Ae(xe.ts),this.es=new Ae(xe.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const s=new xe(e,n);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.rs(new xe(e,n))}os(e,n){e.forEach(s=>this.removeReference(s,n))}us(e){const n=new V(new ye([])),s=new xe(n,e),r=new xe(n,e+1),i=[];return this.es.forEachInRange([s,r],o=>{this.rs(o),i.push(o.key)}),i}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new V(new ye([])),s=new xe(n,e),r=new xe(n,e+1);let i=Q();return this.es.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new xe(e,0),s=this.Zn.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class xe{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return V.comparator(e.key,n.key)||se(e.ls,n.ls)}static ns(e,n){return se(e.ls,n.ls)||V.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new Ae(xe.ts)}checkEmpty(e){return _.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new v0(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.ds=this.ds.add(new xe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ws(s),i=r<0?0:r;return _.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(this.mutationQueue.length===0?-1:this.fs-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new xe(n,0),r=new xe(n,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([s,r],o=>{const a=this._s(o.ls);i.push(a)}),_.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ae(se);return n.forEach(r=>{const i=new xe(r,0),o=new xe(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([i,o],a=>{s=s.add(a.ls)})}),_.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;V.isDocumentKey(i)||(i=i.child(""));const o=new xe(new V(i),0);let a=new Ae(se);return this.ds.forEachWhile(c=>{const l=c.key.path;return!!s.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.ls)),!0)},o),_.resolve(this.gs(a))}gs(e){const n=[];return e.forEach(s=>{const r=this._s(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){de(this.ys(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.ds;return _.forEach(n.mutations,r=>{const i=new xe(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,n){const s=new xe(n,0),r=this.ds.firstAfterOrEqual(s);return _.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,_.resolve()}ys(e,n){return this.ws(e)}ws(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this.ps=e,this.docs=new De(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ps(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return _.resolve(s?s.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let s=Ft();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Me.newInvalidDocument(r))}),_.resolve(s)}getAllFromCollection(e,n,s){let r=Ft();const i=new V(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:c}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||wE(vE(c),s)<=0||(r=r.insert(c.key,c.mutableCopy()))}return _.resolve(r)}getAllFromCollectionGroup(e,n,s,r){H()}Is(e,n){return _.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new k0(this)}getSize(e){return _.resolve(this.size)}}class k0 extends I0{constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.zn.addEntry(e,r)):this.zn.removeEntry(s)}),_.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.persistence=e,this.Ts=new Es(n=>Mc(n),Pc),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Es=0,this.As=new Bc,this.targetCount=0,this.Rs=as.An()}forEachTarget(e,n){return this.Ts.forEach((s,r)=>n(r)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Es&&(this.Es=n),_.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new as(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.vn(n),_.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Ts.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),_.waitFor(i).next(()=>r)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){const s=this.Ts.get(n)||null;return _.resolve(s)}addMatchingKeys(e,n,s){return this.As.ss(n,s),_.resolve()}removeMatchingKeys(e,n,s){this.As.os(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),_.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),_.resolve()}getMatchingKeysForTargetId(e,n){const s=this.As.hs(n);return _.resolve(s)}containsKey(e,n){return _.resolve(this.As.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.bs={},this.overlays={},this.Ps=new Oc(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new O0(this),this.indexManager=new b0,this.remoteDocumentCache=function(s){return new N0(s)}(s=>this.referenceDelegate.Ss(s)),this.wt=new E0(n),this.Ds=new A0(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new D0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.bs[e.toKey()];return s||(s=new x0(n,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,s){R("MemoryPersistence","Starting transaction:",e);const r=new M0(this.Ps.next());return this.referenceDelegate.Cs(),s(r).next(i=>this.referenceDelegate.xs(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ns(e,n){return _.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,n)))}}class M0 extends _E{constructor(e){super(),this.currentSequenceNumber=e}}class jc{constructor(e){this.persistence=e,this.ks=new Bc,this.Ms=null}static Os(e){return new jc(e)}get Fs(){if(this.Ms)return this.Ms;throw H()}addReference(e,n,s){return this.ks.addReference(s,n),this.Fs.delete(s.toString()),_.resolve()}removeReference(e,n,s){return this.ks.removeReference(s,n),this.Fs.add(s.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),_.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(r=>this.Fs.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Fs.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Fs,s=>{const r=V.fromPath(s);return this.$s(e,r).next(i=>{i||n.removeEntry(r,W.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(s=>{s?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return _.or([()=>_.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Pi=s,this.vi=r}static Vi(e,n){let s=Q(),r=Q();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qc(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,s,r){return this.Ci(e,n).next(i=>i||this.xi(e,n,r,s)).next(i=>i||this.Ni(e,n))}Ci(e,n){if(Nu(n))return _.resolve(null);let s=Lt(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ia(n,null,"F"),s=Lt(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Q(...i);return this.Di.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const l=this.ki(n,a);return this.Mi(n,l,o,c.readTime)?this.Ci(e,Ia(n,null,"F")):this.Oi(e,l,n,c)}))})))}xi(e,n,s,r){return Nu(n)||r.isEqual(W.min())?this.Ni(e,n):this.Di.getDocuments(e,s).next(i=>{const o=this.ki(n,i);return this.Mi(n,o,s,r)?this.Ni(e,n):(Eu()<=ne.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sa(n)),this.Oi(e,o,n,yE(r,-1)))})}ki(e,n){let s=new Ae(Nd(e));return n.forEach((r,i)=>{Fc(e,i)&&(s=s.add(i))}),s}Mi(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ni(e,n){return Eu()<=ne.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",Sa(n)),this.Di.getDocumentsMatchingQuery(e,n,Zt.min())}Oi(e,n,s,r){return this.Di.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,s,r){this.persistence=e,this.Fi=n,this.wt=r,this.$i=new De(se),this.Bi=new Es(i=>Mc(i),Pc),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C0(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function F0(t,e,n,s){return new L0(t,e,n,s)}async function Yd(t,e){const n=z(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=Q();for(const l of r){o.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}for(const l of i){a.push(l.batchId);for(const u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(s,c).next(l=>({Ki:l,removedBatchIds:o,addedBatchIds:a}))})})}function V0(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,c,l){const u=c.batch,h=u.keys();let p=_.resolve();return h.forEach(g=>{p=p.next(()=>l.getEntry(a,g)).next(b=>{const D=c.docVersions.get(g);de(D!==null),b.version.compareTo(D)<0&&(u.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),l.addEntry(b)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Q();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Jd(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function $0(t,e){const n=z(t),s=e.snapshotVersion;let r=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ui.newChangeBuffer({trackRemovals:!0});r=n.$i;const a=[];e.targetChanges.forEach((u,h)=>{const p=r.get(h);if(!p)return;a.push(n.Vs.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Vs.addMatchingKeys(i,u.addedDocuments,h)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?g=g.withResumeToken(Ve.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,s)),r=r.insert(h,g),function(b,D,C){return b.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,g,u)&&a.push(n.Vs.updateTargetData(i,g))});let c=Ft(),l=Q();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(U0(i,o,e.documentUpdates).next(u=>{c=u.Gi,l=u.Qi})),!s.isEqual(W.min())){const u=n.Vs.getLastRemoteSnapshotVersion(i).next(h=>n.Vs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(u)}return _.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,l)).next(()=>c)}).then(i=>(n.$i=r,i))}function U0(t,e,n){let s=Q(),r=Q();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Ft();return n.forEach((a,c)=>{const l=i.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(W.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):R("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Gi:o,Qi:r}})}function B0(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function j0(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Vs.getTargetData(s,e).next(i=>i?(r=i,_.resolve(r)):n.Vs.allocateTargetId(s).next(o=>(r=new _n(e,o,0,s.currentSequenceNumber),n.Vs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.$i.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(s.targetId,s),n.Bi.set(e,s.targetId)),s})}async function xa(t,e,n){const s=z(t),r=s.$i.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!br(o))throw o;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.$i=s.$i.remove(e),s.Bi.delete(r.target)}function $u(t,e,n){const s=z(t);let r=W.min(),i=Q();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,c,l){const u=z(a),h=u.Bi.get(l);return h!==void 0?_.resolve(u.$i.get(h)):u.Vs.getTargetData(c,l)}(s,o,Lt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.Fi.getDocumentsMatchingQuery(o,e,n?r:W.min(),n?i:Q())).next(a=>(q0(s,VE(e),a),{documents:a,ji:i})))}function q0(t,e,n){let s=W.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Li.set(e,s)}class Uu{constructor(){this.activeTargetIds=qd()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H0{constructor(){this.Fr=new Uu,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,s){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Uu,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{Br(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.so=n+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,s,r,i){const o=this.oo(e,n);R("RestConnection","Sending: ",o,s);const a={};return this.uo(a,r,i),this.co(e,o,a,s).then(c=>(R("RestConnection","Received: ",c),c),c=>{throw _u("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",s),c})}ao(e,n,s,r,i,o){return this.ro(e,n,s,r,i)}uo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ws,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}oo(e,n){const s=z0[e];return`${this.so}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,s,r){return new Promise((i,o)=>{const a=new aE;a.listenOnce(rE.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ro.NO_ERROR:const l=a.getResponseJson();R("Connection","XHR received:",JSON.stringify(l)),i(l);break;case Ro.TIMEOUT:R("Connection",'RPC "'+e+'" timed out'),o(new F(E.DEADLINE_EXCEEDED,"Request time out"));break;case Ro.HTTP_ERROR:const u=a.getStatus();if(R("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const p=function(g){const b=g.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(b)>=0?b:E.UNKNOWN}(h.status);o(new F(p,h.message))}else o(new F(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new F(E.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{R("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(r);a.send(n,"POST",c,s,15)})}ho(e,n,s){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=nE(),o=sE(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new oE({})),this.uo(a.initMessageHeaders,n,s),Ly()||Vy()||$y()||Uy()||By()||Fy()||(a.httpHeadersOverwriteParam="$httpHeaders");const c=r.join("");R("Connection","Creating WebChannel: "+c,a);const l=i.createWebChannel(c,a);let u=!1,h=!1;const p=new G0({jr:b=>{h?R("Connection","Not sending because WebChannel is closed:",b):(u||(R("Connection","Opening WebChannel transport."),l.open(),u=!0),R("Connection","WebChannel sending:",b),l.send(b))},Wr:()=>l.close()}),g=(b,D,C)=>{b.listen(D,L=>{try{C(L)}catch(oe){setTimeout(()=>{throw oe},0)}})};return g(l,$r.EventType.OPEN,()=>{h||R("Connection","WebChannel transport opened.")}),g(l,$r.EventType.CLOSE,()=>{h||(h=!0,R("Connection","WebChannel transport closed"),p.eo())}),g(l,$r.EventType.ERROR,b=>{h||(h=!0,_u("Connection","WebChannel transport errored:",b),p.eo(new F(E.UNAVAILABLE,"The operation could not be completed")))}),g(l,$r.EventType.MESSAGE,b=>{var D;if(!h){const C=b.data[0];de(!!C);const L=C,oe=L.error||((D=L[0])===null||D===void 0?void 0:D.error);if(oe){R("Connection","WebChannel received error:",oe);const ae=oe.status;let re=function(yt){const $=be[yt];if($!==void 0)return $d($)}(ae),ve=oe.message;re===void 0&&(re=E.INTERNAL,ve="Unknown error status: "+ae+" with message "+oe.message),h=!0,p.eo(new F(re,ve)),l.close()}else R("Connection","WebChannel received:",C),p.no(C)}}),g(o,iE.STAT_EVENT,b=>{b.stat===vu.PROXY?R("Connection","Detected buffering proxy"):b.stat===vu.NOPROXY&&R("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.Zr()},0),p}}function Po(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){return new s0(t,!0)}class Zd{constructor(e,n,s=1e3,r=1.5,i=6e4){this.js=e,this.timerId=n,this.lo=s,this.fo=r,this._o=i,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),r=Math.max(0,n-s);r>0&&R("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){this.mo!==null&&(this.mo.skipDelay(),this.mo=null)}cancel(){this.mo!==null&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,s,r,i,o,a,c){this.js=e,this.Ao=s,this.Ro=r,this.bo=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Zd(e,n)}Do(){return this.state===1||this.state===5||this.Co()}Co(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&this.vo===null&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}async close(e,n){this.Fo(),this.$o(),this.So.cancel(),this.Po++,e!==4?this.So.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(n)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.Po===n&&this.Uo(s,r)},s=>{e(()=>{const r=new F(E.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(r)})})}Uo(e,n){const s=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{s(()=>this.qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}xo(){this.state=5,this.So.Io(async()=>{this.state=0,this.start()})}qo(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q0 extends ep{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.wt=i}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=o0(this.wt,e),s=function(r){if(!("targetChange"in r))return W.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?W.min():i.readTime?kt(i.readTime):W.min()}(e);return this.listener.Go(n,s)}Qo(e){const n={};n.database=Da(this.wt),n.addTarget=function(r,i){let o;const a=i.target;return o=Ta(a)?{documents:l0(r,a)}:{query:u0(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=zd(r,i.resumeToken):i.snapshotVersion.compareTo(W.min())>0&&(o.readTime=Si(r,i.snapshotVersion.toTimestamp())),o}(this.wt,e);const s=f0(this.wt,e);s&&(n.labels=s),this.Oo(n)}jo(e){const n={};n.database=Da(this.wt),n.removeTarget=e,this.Oo(n)}}class X0 extends ep{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.wt=i,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=c0(e.writeResults,e.commitTime),s=kt(e.commitTime);return this.listener.Jo(s,n)}return de(!e.writeResults||e.writeResults.length===0),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Da(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>a0(this.wt,s))};this.Oo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0 extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=s,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new F(E.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.bo.ro(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new F(E.UNKNOWN,r.toString())})}ao(e,n,s,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ao(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new F(E.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class J0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){this.eu===0&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){this.state==="Online"?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,e==="Online"&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Pt(n),this.su=!1):R("OnlineStateTracker",n)}cu(){this.nu!==null&&(this.nu.cancel(),this.nu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=i,this.du.Br(o=>{s.enqueueAndForget(async()=>{On(this)&&(R("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=z(a);c.lu.add(4),await Cr(c),c._u.set("Unknown"),c.lu.delete(4),await oo(c)}(this))})}),this._u=new J0(s,r)}}async function oo(t){if(On(t))for(const e of t.fu)await e(!0)}async function Cr(t){for(const e of t.fu)await e(!1)}function tp(t,e){const n=z(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),zc(n)?Kc(n):_s(n).Co()&&Hc(n,e))}function np(t,e){const n=z(t),s=_s(n);n.hu.delete(e),s.Co()&&sp(n,e),n.hu.size===0&&(s.Co()?s.ko():On(n)&&n._u.set("Unknown"))}function Hc(t,e){t.wu.Nt(e.targetId),_s(t).Qo(e)}function sp(t,e){t.wu.Nt(e),_s(t).jo(e)}function Kc(t){t.wu=new e0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),_s(t).start(),t._u.iu()}function zc(t){return On(t)&&!_s(t).Do()&&t.hu.size>0}function On(t){return z(t).lu.size===0}function rp(t){t.wu=void 0}async function e_(t){t.hu.forEach((e,n)=>{Hc(t,e)})}async function t_(t,e){rp(t),zc(t)?(t._u.uu(e),Kc(t)):t._u.set("Unknown")}async function n_(t,e,n){if(t._u.set("Online"),e instanceof Kd&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.hu.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.hu.delete(o),s.wu.removeTarget(o))}(t,e)}catch(s){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ci(t,s)}else if(e instanceof ei?t.wu.Ut(e):e instanceof Hd?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(W.min()))try{const s=await Jd(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.wu.Yt(i);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const l=r.hu.get(c);l&&r.hu.set(c,l.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const c=r.hu.get(a);if(!c)return;r.hu.set(a,c.withResumeToken(Ve.EMPTY_BYTE_STRING,c.snapshotVersion)),sp(r,a);const l=new _n(c.target,a,1,c.sequenceNumber);Hc(r,l)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){R("RemoteStore","Failed to raise snapshot:",s),await Ci(t,s)}}async function Ci(t,e,n){if(!br(e))throw e;t.lu.add(1),await Cr(t),t._u.set("Offline"),n||(n=()=>Jd(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{R("RemoteStore","Retrying IndexedDB access"),await n(),t.lu.delete(1),await oo(t)})}function ip(t,e){return e().catch(n=>Ci(t,n,e))}async function ao(t){const e=z(t),n=tn(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;s_(e);)try{const r=await B0(e.localStore,s);if(r===null){e.au.length===0&&n.ko();break}s=r.batchId,r_(e,r)}catch(r){await Ci(e,r)}op(e)&&ap(e)}function s_(t){return On(t)&&t.au.length<10}function r_(t,e){t.au.push(e);const n=tn(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function op(t){return On(t)&&!tn(t).Do()&&t.au.length>0}function ap(t){tn(t).start()}async function i_(t){tn(t).Xo()}async function o_(t){const e=tn(t);for(const n of t.au)e.Ho(n.mutations)}async function a_(t,e,n){const s=t.au.shift(),r=Uc.from(s,e,n);await ip(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ao(t)}async function c_(t,e){e&&tn(t).zo&&await async function(n,s){if(r=s.code,QE(r)&&r!==E.ABORTED){const i=n.au.shift();tn(n).No(),await ip(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ao(n)}var r}(t,e),op(t)&&ap(t)}async function ju(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");const s=On(n);n.lu.add(3),await Cr(n),s&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),await oo(n)}async function l_(t,e){const n=z(t);e?(n.lu.delete(2),await oo(n)):e||(n.lu.add(2),await Cr(n),n._u.set("Unknown"))}function _s(t){return t.mu||(t.mu=function(e,n,s){const r=z(e);return r.tu(),new Q0(n,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,s)}(t.datastore,t.asyncQueue,{zr:e_.bind(null,t),Jr:t_.bind(null,t),Go:n_.bind(null,t)}),t.fu.push(async e=>{e?(t.mu.No(),zc(t)?Kc(t):t._u.set("Unknown")):(await t.mu.stop(),rp(t))})),t.mu}function tn(t){return t.gu||(t.gu=function(e,n,s){const r=z(e);return r.tu(),new X0(n,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,s)}(t.datastore,t.asyncQueue,{zr:i_.bind(null,t),Jr:c_.bind(null,t),Yo:o_.bind(null,t),Jo:a_.bind(null,t)}),t.fu.push(async e=>{e?(t.gu.No(),await ao(t)):(await t.gu.stop(),t.au.length>0&&(R("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))})),t.gu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Gc(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wc(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),br(t))return new F(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.comparator=e?(n,s)=>e(n,s)||V.comparator(n.key,s.key):(n,s)=>V.comparator(n.key,s.key),this.keyedMap=Ns(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new Jn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Jn;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this.yu=new De(V.comparator)}track(e){const n=e.doc.key,s=this.yu.get(n);s?e.type!==0&&s.type===3?this.yu=this.yu.insert(n,e):e.type===3&&s.type!==1?this.yu=this.yu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.yu=this.yu.remove(n):e.type===1&&s.type===2?this.yu=this.yu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):H():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,s)=>{e.push(s)}),e}}class cs{constructor(e,n,s,r,i,o,a,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c}static fromInitialDocuments(e,n,s,r){const i=[];return n.forEach(o=>{i.push({type:0,doc:o})}),new cs(e,n,Jn.emptySet(n),i,s,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&to(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.Iu=void 0,this.listeners=[]}}class h_{constructor(){this.queries=new Es(e=>xd(e),to),this.onlineState="Unknown",this.Tu=new Set}}async function f_(t,e){const n=z(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new u_),r)try{i.Iu=await n.onListen(s)}catch(o){const a=Wc(o,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.Eu(n.onlineState),i.Iu&&e.Au(i.Iu)&&Qc(n)}async function d_(t,e){const n=z(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function p_(t,e){const n=z(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Au(r)&&(s=!0);o.Iu=r}}s&&Qc(n)}function g_(t,e,n){const s=z(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Qc(t){t.Tu.forEach(e=>{e.next()})}class m_{constructor(e,n,s){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new cs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Du||!s)&&(!e.docs.isEmpty()||n==="Offline")}vu(e){if(e.docChanges.length>0)return!0;const n=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Su(e){e=cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.key=e}}class lp{constructor(e){this.key=e}}class y_{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Q(),this.mutatedKeys=Q(),this.Lu=Nd(e),this.Uu=new Jn(this.Lu)}get qu(){return this.Fu}Ku(e,n){const s=n?n.Gu:new qu,r=n?n.Uu:this.Uu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const p=r.get(u),g=Fc(this.query,h)?h:null,b=!!p&&this.mutatedKeys.has(p.key),D=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?b!==D&&(s.track({type:3,doc:g}),C=!0):this.Qu(p,g)||(s.track({type:2,doc:g}),C=!0,(c&&this.Lu(g,c)>0||l&&this.Lu(g,l)<0)&&(a=!0)):!p&&g?(s.track({type:0,doc:g}),C=!0):p&&!g&&(s.track({type:1,doc:p}),C=!0,(c||l)&&(a=!0)),C&&(g?(o=o.add(g),i=D?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{Uu:o,Gu:s,Mi:a,mutatedKeys:i}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const i=e.Gu.pu();i.sort((l,u)=>function(h,p){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return g(h)-g(p)}(l.type,u.type)||this.Lu(l.doc,u.doc)),this.ju(s);const o=n?this.Wu():[],a=this.Bu.size===0&&this.current?1:0,c=a!==this.$u;return this.$u=a,i.length!==0||c?{snapshot:new cs(this.query,e.Uu,r,i,e.mutatedKeys,a===0,c,!1),zu:o}:{zu:o}}Eu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new qu,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Q(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const n=[];return e.forEach(s=>{this.Bu.has(s)||n.push(new lp(s))}),this.Bu.forEach(s=>{e.has(s)||n.push(new cp(s))}),n}Ju(e){this.Fu=e.ji,this.Bu=Q();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return cs.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,this.$u===0)}}class v_{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class w_{constructor(e){this.key=e,this.Xu=!1}}class E_{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Es(a=>xd(a),to),this.ec=new Map,this.nc=new Set,this.sc=new De(V.comparator),this.ic=new Map,this.rc=new Bc,this.oc={},this.uc=new Map,this.cc=as.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return this.ac===!0}}async function __(t,e){const n=k_(t);let s,r;const i=n.tc.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.Yu();else{const o=await j0(n.localStore,Lt(e));n.isPrimaryClient&&tp(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await b_(n,e,s,a==="current")}return r}async function b_(t,e,n,s){t.hc=(u,h,p)=>async function(g,b,D,C){let L=b.view.Ku(D);L.Mi&&(L=await $u(g.localStore,b.query,!1).then(({documents:re})=>b.view.Ku(re,L)));const oe=C&&C.targetChanges.get(b.targetId),ae=b.view.applyChanges(L,g.isPrimaryClient,oe);return Ku(g,b.targetId,ae.zu),ae.snapshot}(t,u,h,p);const r=await $u(t.localStore,e,!0),i=new y_(e,r.ji),o=i.Ku(r.documents),a=Sr.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline"),c=i.applyChanges(o,t.isPrimaryClient,a);Ku(t,n,c.zu);const l=new v_(e,n,i);return t.tc.set(e,l),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),c.snapshot}async function T_(t,e){const n=z(t),s=n.tc.get(e),r=n.ec.get(s.targetId);if(r.length>1)return n.ec.set(s.targetId,r.filter(i=>!to(i,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await xa(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),np(n.remoteStore,s.targetId),Na(n,s.targetId)}).catch(_r)):(Na(n,s.targetId),await xa(n.localStore,s.targetId,!0))}async function I_(t,e,n){const s=O_(t);try{const r=await function(i,o){const a=z(i),c=Ce.now(),l=o.reduce((p,g)=>p.add(g.key),Q());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ft(),b=Q();return a.Ui.getEntries(p,l).next(D=>{g=D,g.forEach((C,L)=>{L.isValidDocument()||(b=b.add(C))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,g)).next(D=>{u=D;const C=[];for(const L of o){const oe=zE(L,u.get(L.key).overlayedDocument);oe!=null&&C.push(new rn(L.key,oe,Sd(oe.value.mapValue),mt.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,C,o)}).next(D=>{h=D;const C=D.applyToLocalDocumentSet(u,b);return a.documentOverlayCache.saveOverlays(p,D.batchId,C)})}).then(()=>({batchId:h.batchId,changes:Bd(u)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let c=i.oc[i.currentUser.toKey()];c||(c=new De(se)),c=c.insert(o,a),i.oc[i.currentUser.toKey()]=c}(s,r.batchId,n),await Ar(s,r.changes),await ao(s.remoteStore)}catch(r){const i=Wc(r,"Failed to persist write");n.reject(i)}}async function up(t,e){const n=z(t);try{const s=await $0(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.ic.get(i);o&&(de(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Xu=!0:r.modifiedDocuments.size>0?de(o.Xu):r.removedDocuments.size>0&&(de(o.Xu),o.Xu=!1))}),await Ar(n,s,e)}catch(s){await _r(s)}}function Hu(t,e,n){const s=z(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.tc.forEach((i,o)=>{const a=o.view.Eu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=z(i);a.onlineState=o;let c=!1;a.queries.forEach((l,u)=>{for(const h of u.listeners)h.Eu(o)&&(c=!0)}),c&&Qc(a)}(s.eventManager,e),r.length&&s.Zu.Go(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function S_(t,e,n){const s=z(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.ic.get(e),i=r&&r.key;if(i){let o=new De(V.comparator);o=o.insert(i,Me.newNoDocument(i,W.min()));const a=Q().add(i),c=new ro(W.min(),new Map,new Ae(se),o,a);await up(s,c),s.sc=s.sc.remove(i),s.ic.delete(e),Xc(s)}else await xa(s.localStore,e,!1).then(()=>Na(s,e,n)).catch(_r)}async function C_(t,e){const n=z(t),s=e.batch.batchId;try{const r=await V0(n.localStore,e);fp(n,s,null),hp(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ar(n,r)}catch(r){await _r(r)}}async function A_(t,e,n){const s=z(t);try{const r=await function(i,o){const a=z(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return a.mutationQueue.lookupMutationBatch(c,o).next(u=>(de(u!==null),l=u.keys(),a.mutationQueue.removeMutationBatch(c,u))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,l,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>a.localDocuments.getDocuments(c,l))})}(s.localStore,e);fp(s,e,n),hp(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ar(s,r)}catch(r){await _r(r)}}function hp(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function fp(t,e,n){const s=z(t);let r=s.oc[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.oc[s.currentUser.toKey()]=r}}function Na(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.ec.get(e))t.tc.delete(s),n&&t.Zu.lc(s,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(s=>{t.rc.containsKey(s)||dp(t,s)})}function dp(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);n!==null&&(np(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),Xc(t))}function Ku(t,e,n){for(const s of n)s instanceof cp?(t.rc.addReference(s.key,e),D_(t,s)):s instanceof lp?(R("SyncEngine","Document no longer in limbo: "+s.key),t.rc.removeReference(s.key,e),t.rc.containsKey(s.key)||dp(t,s.key)):H()}function D_(t,e){const n=e.key,s=n.path.canonicalString();t.sc.get(n)||t.nc.has(s)||(R("SyncEngine","New document in limbo: "+n),t.nc.add(s),Xc(t))}function Xc(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new V(ye.fromString(e)),s=t.cc.next();t.ic.set(s,new w_(n)),t.sc=t.sc.insert(n,s),tp(t.remoteStore,new _n(Lt(Lc(n.path)),s,2,Oc.ot))}}async function Ar(t,e,n){const s=z(t),r=[],i=[],o=[];s.tc.isEmpty()||(s.tc.forEach((a,c)=>{o.push(s.hc(c,e,n).then(l=>{if(l){s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),r.push(l);const u=qc.Vi(c.targetId,l);i.push(u)}}))}),await Promise.all(o),s.Zu.Go(r),await async function(a,c){const l=z(a);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>_.forEach(c,h=>_.forEach(h.Pi,p=>l.persistence.referenceDelegate.addReference(u,h.targetId,p)).next(()=>_.forEach(h.vi,p=>l.persistence.referenceDelegate.removeReference(u,h.targetId,p)))))}catch(u){if(!br(u))throw u;R("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const h=u.targetId;if(!u.fromCache){const p=l.$i.get(h),g=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(g);l.$i=l.$i.insert(h,b)}}}(s.localStore,i))}async function x_(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());const s=await Yd(n.localStore,e);n.currentUser=e,function(r,i){r.uc.forEach(o=>{o.forEach(a=>{a.reject(new F(E.CANCELLED,i))})}),r.uc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ar(n,s.Ki)}}function N_(t,e){const n=z(t),s=n.ic.get(e);if(s&&s.Xu)return Q().add(s.key);{let r=Q();const i=n.ec.get(e);if(!i)return r;for(const o of i){const a=n.tc.get(o);r=r.unionWith(a.view.qu)}return r}}function k_(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=up.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S_.bind(null,e),e.Zu.Go=p_.bind(null,e.eventManager),e.Zu.lc=g_.bind(null,e.eventManager),e}function O_(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A_.bind(null,e),e}class R_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.wt=io(e.databaseInfo.databaseId),this.sharedClientState=this.dc(e),this.persistence=this._c(e),await this.persistence.start(),this.localStore=this.wc(e),this.gcScheduler=this.mc(e,this.localStore),this.indexBackfillerScheduler=this.gc(e,this.localStore)}mc(e,n){return null}gc(e,n){return null}wc(e){return F0(this.persistence,new P0,e.initialUser,this.wt)}_c(e){return new R0(jc.Os,this.wt)}dc(e){return new H0}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class M_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Hu(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=x_.bind(null,this.syncEngine),await l_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new h_}createDatastore(e){const n=io(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new W0(r));var r;return function(i,o,a,c){return new Y0(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Hu(this.syncEngine,a,0),o=Bu.V()?new Bu:new K0,new Z0(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,c,l){const u=new E_(s,r,i,o,a,c);return l&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=z(e);R("RemoteStore","RemoteStore shutting down."),n.lu.add(5),await Cr(n),n.du.shutdown(),n._u.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Xe.UNAUTHENTICATED,this.clientId=_d.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{R("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(R("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Wc(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function F_(t,e){t.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Yd(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function V_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $_(t);R("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>ju(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ju(e.remoteStore,i)),t.onlineComponents=e}async function $_(t){return t.offlineComponents||(R("FirestoreClient","Using default OfflineComponentProvider"),await F_(t,new R_)),t.offlineComponents}async function pp(t){return t.onlineComponents||(R("FirestoreClient","Using default OnlineComponentProvider"),await V_(t,new M_)),t.onlineComponents}function U_(t){return pp(t).then(e=>e.syncEngine)}async function zu(t){const e=await pp(t),n=e.eventManager;return n.onListen=__.bind(null,e.syncEngine),n.onUnlisten=T_.bind(null,e.syncEngine),n}const Gu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t,e,n){if(!n)throw new F(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function B_(t,e,n,s){if(e===!0&&s===!0)throw new F(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wu(t){if(!V.isDocumentKey(t))throw new F(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qu(t){if(V.isDocumentKey(t))throw new F(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yc(t);throw new F(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new F(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,B_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,s){this._authCredentials=n,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xu({}),this._settingsFrozen=!1,e instanceof is?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new F(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(r.options.projectId)}(e))}get app(){if(!this._app)throw new F(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xu(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new lE;switch(n.type){case"gapi":const s=n.client;return de(!(typeof s!="object"||s===null||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new fE(s,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new F(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Gu.get(e);n&&(R("ComponentProvider","Removing Datastore"),Gu.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nt(this.firestore,e,this._key)}}class Dr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Dr(this.firestore,e,this._query)}}class Xt extends Dr{constructor(e,n,s){super(e,n,Lc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new V(e))}withConverter(e){return new Xt(this.firestore,e,this._path)}}function mp(t,e,...n){if(t=Rt(t),gp("collection","path",e),t instanceof Jc){const s=ye.fromString(e,...n);return Qu(s),new Xt(t,null,s)}{if(!(t instanceof nt||t instanceof Xt))throw new F(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ye.fromString(e,...n));return Qu(s),new Xt(t.firestore,null,s)}}function ka(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=_d.I()),gp("doc","path",e),t instanceof Jc){const s=ye.fromString(e,...n);return Wu(s),new nt(t,null,new V(s))}{if(!(t instanceof nt||t instanceof Xt))throw new F(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ye.fromString(e,...n));return Wu(s),new nt(t.firestore,t instanceof Xt?t.converter:null,new V(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Zd(this,"async_queue_retry"),this.Kc=()=>{const n=Po();n&&R("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=Po();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=Po();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new En;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}async jc(){if(this.Oc.length!==0){try{await this.Oc[0](),this.Oc.shift(),this.So.reset()}catch(e){if(!br(e))throw e;R("AsyncQueue","Operation failed with retryable error: "+e)}this.Oc.length>0&&this.So.Io(()=>this.jc())}}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(s=>{this.Bc=s,this.Lc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw Pt("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Lc=!1,s))));return this.Mc=n,n}enqueueAfterDelay(e,n,s){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const r=Gc.createAndSchedule(this,e,n,s,i=>this.Wc(i));return this.$c.push(r),r}Gc(){this.Bc&&H()}verifyOperationInProgress(){}async zc(){let e;do e=this.Mc,await e;while(e!==this.Mc)}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function Yu(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class ls extends Jc{constructor(e,n,s){super(e,n,s),this.type="firestore",this._queue=new j_,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||vp(this),this._firestoreClient.terminate()}}function q_(t=zv()){return Bv(t,"firestore").getImmediate()}function yp(t){return t._firestoreClient||vp(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vp(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new TE(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new L_(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new us(Ve.fromBase64String(e))}catch(n){throw new F(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new us(Ve.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=/^__.*__$/;class K_{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new rn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ir(e,this.data,n,this.fieldTransforms)}}class wp{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new rn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ep(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class tl{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.wt=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Xc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new tl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ta({path:s,na:!1});return r.sa(e),r}ia(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ta({path:s,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Ai(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(e.length===0)throw this.oa("Document fields must not be empty");if(Ep(this.Zc)&&H_.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class z_{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=s||io(e)}aa(e,n,s,r=!1){return new tl({Zc:e,methodName:n,ca:s,path:je.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function _p(t){const e=t._freezeSettings(),n=io(t._databaseId);return new z_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G_(t,e,n,s,r,i={}){const o=t.aa(i.merge||i.mergeFields?2:0,e,n,r);nl("Data must be an object, but it was:",o,s);const a=bp(s,o);let c,l;if(i.merge)c=new at(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const h of i.mergeFields){const p=Oa(e,h,n);if(!o.contains(p))throw new F(E.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Ip(u,p)||u.push(p)}c=new at(u),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new K_(new Ye(a),c,l)}class lo extends Zc{_toFieldTransform(e){if(e.Zc!==2)throw e.Zc===1?e.oa(`${this._methodName}() can only appear at the top level of your update data`):e.oa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lo}}function W_(t,e,n,s){const r=t.aa(1,e,n);nl("Data must be an object, but it was:",r,s);const i=[],o=Ye.empty();kn(s,(c,l)=>{const u=sl(e,c,n);l=Rt(l);const h=r.ia(u);if(l instanceof lo)i.push(u);else{const p=uo(l,h);p!=null&&(i.push(u),o.set(u,p))}});const a=new at(i);return new wp(o,a,r.fieldTransforms)}function Q_(t,e,n,s,r,i){const o=t.aa(1,e,n),a=[Oa(e,s,n)],c=[r];if(i.length%2!=0)throw new F(E.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Oa(e,i[p])),c.push(i[p+1]);const l=[],u=Ye.empty();for(let p=a.length-1;p>=0;--p)if(!Ip(l,a[p])){const g=a[p];let b=c[p];b=Rt(b);const D=o.ia(g);if(b instanceof lo)l.push(g);else{const C=uo(b,D);C!=null&&(l.push(g),u.set(g,C))}}const h=new at(l);return new wp(u,h,o.fieldTransforms)}function uo(t,e){if(Tp(t=Rt(t)))return nl("Unsupported field value:",e,t),bp(t,e);if(t instanceof Zc)return function(n,s){if(!Ep(s.Zc))throw s.oa(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&e.Zc!==4)throw e.oa("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=uo(o,s.ra(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Rt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return UE(s.wt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ce.fromDate(n);return{timestampValue:Si(s.wt,r)}}if(n instanceof Ce){const r=new Ce(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Si(s.wt,r)}}if(n instanceof el)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof us)return{bytesValue:zd(s.wt,n._byteString)};if(n instanceof nt){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.oa(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:$c(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.oa(`Unsupported field value: ${Yc(n)}`)}(t,e)}function bp(t,e){const n={};return bd(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kn(t,(s,r)=>{const i=uo(r,e.ea(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Tp(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof el||t instanceof us||t instanceof nt||t instanceof Zc)}function nl(t,e,n){if(!Tp(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=Yc(n);throw s==="an object"?e.oa(t+" a custom object"):e.oa(t+" "+s)}}function Oa(t,e,n){if((e=Rt(e))instanceof co)return e._internalPath;if(typeof e=="string")return sl(t,e);throw Ai("Field path arguments must be of type string or ",t,!1,void 0,n)}const X_=new RegExp("[~\\*/\\[\\]]");function sl(t,e,n){if(e.search(X_)>=0)throw Ai(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new co(...e.split("."))._internalPath}catch{throw Ai(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ai(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new F(E.INVALID_ARGUMENT,a+t+c)}function Ip(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y_ extends Sp{data(){return super.data()}}function rl(t,e){return typeof e=="string"?sl(t,e):e instanceof co?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cp extends Sp{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ti(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(rl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ti extends Cp{data(e={}){return super.data(e)}}class J_{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ks(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ti(this._firestore,this._userDataWriter,s.key,s,new ks(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>({type:"added",doc:new ti(s._firestore,s._userDataWriter,o.doc.key,o.doc,new ks(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:i++}))}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new ti(s._firestore,s._userDataWriter,o.doc.key,o.doc,new ks(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,l=-1;return o.type!==0&&(c=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),l=i.indexOf(o.doc.key)),{type:Z_(o.type),doc:a,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Z_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tb{}function nb(t,...e){for(const n of e)t=n._apply(t);return t}class sb extends tb{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(s,r,i){if(s.startAt!==null)throw new F(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new F(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Yn(r,i);return function(a,c){if(Ad(a)===null){const l=Dd(a);l!==null&&ib(a,l,c.field)}}(s,o),o}(e._query,this.fa,this.wa);return new Dr(e.firestore,e.converter,function(s,r){const i=s.explicitOrderBy.concat([r]);return new Tr(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function rb(t,e="asc"){const n=e,s=rl("orderBy",t);return new sb(s,n)}function ib(t,e,n){if(!n.isEqual(e))throw new F(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{convertValue(e,n="none"){switch(xn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){const s={};return kn(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new el(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Id(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ir(e));default:return null}}convertTimestamp(e){const n=en(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ye.fromString(e);de(Xd(s));const r=new is(s.get(1),s.get(3)),i=new V(s.popFirst(5));return r.isEqual(n)||Pt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}class Ap extends ob{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,n)}}function cb(t,e,n,...s){t=bn(t,nt);const r=bn(t.firestore,ls),i=_p(r);let o;return o=typeof(e=Rt(e))=="string"||e instanceof co?Q_(i,"updateDoc",t._key,e,n,s):W_(i,"updateDoc",t._key,e),il(r,[o.toMutation(t._key,mt.exists(!0))])}function lb(t){return il(bn(t.firestore,ls),[new Vc(t._key,mt.none())])}function ub(t,e){const n=bn(t.firestore,ls),s=ka(t),r=ab(t.converter,e);return il(n,[G_(_p(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,mt.exists(!1))]).then(()=>s)}function hb(t,...e){var n,s,r;t=Rt(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Yu(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Yu(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let c,l,u;if(t instanceof nt)l=bn(t.firestore,ls),u=Lc(t._key.path),c={next:h=>{e[o]&&e[o](fb(l,t,h))},error:e[o+1],complete:e[o+2]};else{const h=bn(t,Dr);l=bn(h.firestore,ls),u=h._query;const p=new Ap(l);c={next:g=>{e[o]&&e[o](new J_(l,p,h,g))},error:e[o+1],complete:e[o+2]},eb(t._query)}return function(h,p,g,b){const D=new P_(b),C=new m_(p,D,g);return h.asyncQueue.enqueueAndForget(async()=>f_(await zu(h),C)),()=>{D.Tc(),h.asyncQueue.enqueueAndForget(async()=>d_(await zu(h),C))}}(yp(l),u,a,c)}function il(t,e){return function(n,s){const r=new En;return n.asyncQueue.enqueueAndForget(async()=>I_(await U_(n),s,r)),r.promise}(yp(t),e)}function fb(t,e,n){const s=n.docs.get(e._key),r=new Ap(t);return new Cp(t,r,e._key,s,new ks(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){ws=n})(Hv),hi(new Ys("firestore",(n,{options:s})=>{const r=n.getProvider("app").getImmediate(),i=new ls(r,new uE(n.getProvider("auth-internal")),new pE(n.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),i._setSettings(s),i},"PUBLIC")),Qn(wu,"3.4.14",t),Qn(wu,"3.4.14","esm2017")})();var db="firebase",pb="9.9.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(db,pb,"app");const gb={apiKey:"AIzaSyAGAsxVI4qQ52Tzhti9G5wdmfSXWGqZONk",authDomain:"events7-4fd4c.firebaseapp.com",projectId:"events7-4fd4c",storageBucket:"events7-4fd4c.appspot.com",messagingSenderId:"235795348639",appId:"1:235795348639:web:be52f7212502b5528536aa"},mb=Kv(gb),ni=q_(mb),bs=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},yb={},vb={xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},wb=te("path",{d:"M5.896 17.5q-.729 0-1.24-.51-.51-.511-.51-1.24V5.125q-.354 0-.615-.26-.26-.261-.26-.615t.26-.615q.261-.26.615-.26h3.375q0-.354.26-.615.261-.26.615-.26h3.187q.355 0 .615.26.26.261.26.615h3.375q.355 0 .615.26.26.261.26.615t-.26.615q-.26.26-.615.26V15.75q0 .729-.51 1.24-.511.51-1.24.51Zm0-12.375V15.75h8.187V5.125Zm1.562 8q0 .354.261.615.26.26.614.26.355 0 .615-.26.26-.261.26-.615V7.75q0-.354-.26-.615-.26-.26-.615-.26-.354 0-.614.26-.261.261-.261.615Zm3.313 0q0 .354.26.615.261.26.615.26t.614-.26q.261-.261.261-.615V7.75q0-.354-.261-.615-.26-.26-.614-.26t-.615.26q-.26.261-.26.615Zm-4.875-8V15.75 5.125Z"},null,-1),Eb=[wb];function _b(t,e){return ie(),ue("svg",vb,Eb)}const bb=bs(yb,[["render",_b]]),Tb={},Ib={xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},Sb=te("path",{d:"M4.25 15.75h1.229l7-7-1.229-1.229-7 7Zm11.938-8.208-3.73-3.73 1.021-1.02q.521-.521 1.24-.521t1.239.521l1.25 1.25q.5.5.5 1.239 0 .74-.5 1.24ZM3.375 17.5q-.354 0-.615-.26-.26-.261-.26-.615v-2.5q0-.167.062-.323.063-.156.188-.281l8.479-8.479 3.729 3.729-8.479 8.479q-.125.125-.281.188-.156.062-.323.062Zm8.5-9.354-.625-.625 1.229 1.229Z"},null,-1),Cb=[Sb];function Ab(t,e){return ie(),ue("svg",Ib,Cb)}const Db=bs(Tb,[["render",Ab]]),xb={},Nb={xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20"},kb=te("path",{d:"M7.979 14.646q-.167 0-.323-.063-.156-.062-.302-.208l-3.521-3.521q-.25-.25-.239-.635.01-.386.26-.636t.625-.25q.375 0 .625.25L8.021 12.5l6.896-6.896q.25-.25.614-.25.365 0 .615.25t.25.615q0 .364-.25.614l-7.542 7.542q-.146.146-.302.208-.156.063-.323.063Z"},null,-1),Ob=[kb];function Rb(t,e){return ie(),ue("svg",Nb,Ob)}const Mb=bs(xb,[["render",Rb]]),Rn=t=>(xh("data-v-5f977f29"),t=t(),Nh(),t),Pb={class:"event-card"},Lb=["onSubmit"],Fb={class:"event-field"},Vb=Rn(()=>te("label",{for:"id"},"ID",-1)),$b={key:1},Ub={class:"event-field"},Bb=Rn(()=>te("label",{for:"name"},"Name",-1)),jb={key:1},qb={class:"event-field"},Hb=Rn(()=>te("label",{for:"description"},"Description",-1)),Kb={key:1},zb={class:"event-field"},Gb=Rn(()=>te("label",{for:"type"},"Type",-1)),Wb=Qh('<option disabled value="" data-v-5f977f29></option><option value="crosspromo" data-v-5f977f29>crosspromo</option><option value="liveops" data-v-5f977f29>liveops</option><option value="app" data-v-5f977f29>app</option><option value="ads" data-v-5f977f29>ads</option>',5),Qb=[Wb],Xb={key:1},Yb={class:"event-field"},Jb=Rn(()=>te("label",{for:"priority"},"Priority",-1)),Zb=Rn(()=>te("option",{disabled:"",value:""},null,-1)),eT=["value"],tT={key:1},nT={class:"event-field"},sT=Rn(()=>te("label",{for:"related-events"},"Related Events",-1)),rT={key:0,class:"related-events-choices"},iT=["value","onUpdate:modelValue"],oT={key:1,class:"related-events-list"},aT={class:"event-field event-buttons"},cT={key:0,class:"round-button update-button"},lT=["disabled"],uT=["disabled"],hT=Qa({__name:"Event",props:{event:null},setup(t){const e=t,n=ic(),s=c=>{ub(mp(ni,"events"),{id:c.id,name:c.name,description:c.description,type:c.type,priority:c.priority,"related-events":c.relatedEvents}),c.isNew=!1,c.isBeingEdited=!1,n.editing=!1,n.newEvent.pop()},r=c=>{c.isBeingEdited=!0,n.editing=!0},i=c=>{cb(ka(ni,"events",c.docId),{id:c.id,name:c.name,description:c.description,type:c.type,priority:c.priority,"related-events":c.relatedEvents}),c.isBeingEdited=!1,n.editing=!1},o=()=>{for(const c of n.getOtherEvents(e.event))if(e.event.id===c.id){alert("Event ID must be unique.");return}if(e.event.isBeingEdited&&e.event.isNew)return s(e.event);if(e.event.isBeingEdited&&!e.event.isNew)return i(e.event)},a=c=>{c.isNew?n.newEvent.pop():lb(ka(ni,"events",c.docId)),c.isBeingEdited=!1,n.editing=!1};return(c,l)=>(ie(),ue("li",Pb,[te("form",{class:"event-form",onSubmit:Jm(o,["prevent"])},[te("div",Fb,[Vb,e.event.isBeingEdited?Vn((ie(),ue("input",{key:0,"onUpdate:modelValue":l[0]||(l[0]=u=>e.event.id=u),type:"text",class:"text-input",id:"id",placeholder:"ID",autocomplete:"off",maxlength:"3",required:""},null,512)),[[wo,e.event.id]]):(ie(),ue("p",$b,Ut(e.event.id),1))]),te("div",Ub,[Bb,e.event.isBeingEdited?Vn((ie(),ue("input",{key:0,"onUpdate:modelValue":l[1]||(l[1]=u=>e.event.name=u),class:"text-input",id:"name",placeholder:"Name",autocomplete:"off",required:""},null,512)),[[wo,e.event.name]]):(ie(),ue("p",jb,Ut(e.event.name),1))]),te("div",qb,[Hb,e.event.isBeingEdited?Vn((ie(),ue("textarea",{key:0,"onUpdate:modelValue":l[2]||(l[2]=u=>e.event.description=u),class:"text-input",id:"description",placeholder:"Description",rows:"1",required:""},`\r
        `,512)),[[wo,e.event.description]]):(ie(),ue("p",Kb,Ut(e.event.description),1))]),te("div",zb,[Gb,e.event.isBeingEdited?Vn((ie(),ue("select",{key:0,"onUpdate:modelValue":l[3]||(l[3]=u=>e.event.type=u),class:"dropdown",name:"type",id:"type",required:""},Qb,512)),[[jl,e.event.type]]):(ie(),ue("p",Xb,Ut(e.event.type),1))]),te("div",Yb,[Jb,e.event.isBeingEdited?Vn((ie(),ue("select",{key:0,"onUpdate:modelValue":l[4]||(l[4]=u=>e.event.priority=u),class:"dropdown",name:"priority",id:"priority",required:""},[Zb,(ie(),ue(Be,null,Ps(11,u=>te("option",{value:u-1},Ut(u-1),9,eT)),64))],512)),[[jl,e.event.priority]]):(ie(),ue("p",tT,Ut(e.event.priority),1))]),te("div",nT,[sT,e.event.isBeingEdited?(ie(),ue("ul",rT,[(ie(!0),ue(Be,null,Ps(Gt(n).getOtherEvents(e.event),u=>(ie(),ue("li",null,[Vn(te("input",{type:"checkbox",value:u.name,"onUpdate:modelValue":h=>e.event.relatedEvents=h},null,8,iT),[[Qm,e.event.relatedEvents]]),Wh(" "+Ut(u.name),1)]))),256))])):(ie(),ue("ul",oT,[(ie(!0),ue(Be,null,Ps(e.event.relatedEvents,u=>(ie(),ue("li",null,Ut(u),1))),256))]))]),te("div",aT,[e.event.isBeingEdited?(ie(),ue("button",cT,[tt(Mb)])):(ie(),ue("button",{key:1,onClick:l[5]||(l[5]=u=>r(e.event)),class:"round-button edit-button",disabled:Gt(n).editing},[tt(Db)],8,lT)),te("button",{onClick:l[6]||(l[6]=u=>a(e.event)),class:"round-button delete-button",disabled:Gt(n).editing&&!e.event.isBeingEdited},[tt(bb)],8,uT)])],40,Lb)]))}});const Ju=bs(hT,[["__scopeId","data-v-5f977f29"]]),fT={class:"dashboard"},dT=Qh('<div class="dashboard-header" data-v-a7975b17><div class="dashboard-id" data-v-a7975b17>ID</div><div class="dashboard-name" data-v-a7975b17>Name</div><div class="dashboard-description" data-v-a7975b17>Description</div><div class="dashboard-type" data-v-a7975b17>Type</div><div class="dashboard-priority" data-v-a7975b17>Priority</div><div class="dashboard-related-events" data-v-a7975b17>Related Events</div></div>',1),pT={class:"dashboard-content"},gT={class:"event-list"},mT={class:"event-list"},yT=["disabled"],vT=Qa({__name:"Dashboard",setup(t){const e=ic(),n=()=>{const s={id:"",name:"",description:"",type:"",priority:null,relatedEvents:[],docId:"",isBeingEdited:!0,isNew:!0};e.newEvent.push(s),e.editing=!0};return(s,r)=>(ie(),ue("div",fT,[dT,te("div",pT,[te("ul",gT,[(ie(!0),ue(Be,null,Ps(Gt(e).events,i=>(ie(),kl(Ju,{event:i},null,8,["event"]))),256))]),te("ul",mT,[(ie(!0),ue(Be,null,Ps(Gt(e).newEvent,i=>(ie(),kl(Ju,{event:i},null,8,["event"]))),256))]),te("button",{onClick:n,class:"add-button",disabled:Gt(e).editing}," + Add Event ",8,yT)])]))}});const wT=bs(vT,[["__scopeId","data-v-a7975b17"]]),ET=t=>(xh("data-v-4c0e0cf0"),t=t(),Nh(),t),_T=ET(()=>te("header",null,[te("h1",null,"Events7"),te("p",{class:"instructions"},' You can define events by clicking the "Add Event" button. Event definition must contain a unique ID, an event name, description, type and priority. You can edit an event by clicking the blue "pencil" button, save it by clicking the green "check" button or delete it by clicking the red "bin" button. ')],-1)),bT=Qa({__name:"App",setup(t){const e=ic(),n=mp(ni,"events"),s=nb(n,rb("id"));return Xa(()=>{hb(s,r=>{const i=[];r.forEach(o=>{const a={id:o.data().id,name:o.data().name,description:o.data().description,type:o.data().type,priority:o.data().priority,relatedEvents:o.data()["related-events"],docId:o.id,isBeingEdited:!1,isNew:!1};i.push(a)}),e.events=i})}),(r,i)=>(ie(),ue(Be,null,[_T,te("main",null,[tt(wT)])],64))}});const TT=bs(bT,[["__scopeId","data-v-4c0e0cf0"]]);const Dp=ty(TT);Dp.use(Ay());Dp.mount("#app");
